<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ - ã¿ã‚“ãªã®ç¨å‹™é¡§å•</title>
    <meta name="description" content="ãƒãƒ£ãƒƒãƒˆã§æ°—è»½ã«ç¨å‹™ç›¸è«‡ã€‚ã‚ˆãã‚ã‚‹è³ªå•ã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãŠç­”ãˆã—ã¾ã™ã€‚å€‹äººäº‹æ¥­ä¸»ãƒ»ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—å‘ã‘ç¨å‹™ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒãƒ£ãƒƒãƒˆã‚µãƒãƒ¼ãƒˆã€‚">
    
    <!-- OGP Tags -->
    <meta property="og:title" content="ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ - ã¿ã‚“ãªã®ç¨å‹™é¡§å•">
    <meta property="og:description" content="ãƒãƒ£ãƒƒãƒˆã§æ°—è»½ã«ç¨å‹™ç›¸è«‡ã€‚ã‚ˆãã‚ã‚‹è³ªå•ã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãŠç­”ãˆã—ã¾ã™ã€‚å€‹äººäº‹æ¥­ä¸»ãƒ»ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—å‘ã‘ç¨å‹™ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒãƒ£ãƒƒãƒˆã‚µãƒãƒ¼ãƒˆã€‚">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://minzei-tax.com/chat">
    <meta property="og:image" content="https://minzei-tax.com/images/thumbnail.png">
    <meta name="twitter:card" content="summary_large_image">

    <link rel="icon" href="images/minzeikun.png" type="image/png">

    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&family=Noto+Serif+JP:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Google Tag -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17411262353"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'AW-17411262353');
    </script>
    
    <style>
    .page-container {
        min-height: 100vh;
        background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
        padding: 80px 0 0 0;
    }
    
    .simulator-section {
        max-width: 1000px;
        margin: 0 auto 40px auto;
        padding: 0 20px;
    }
    
    .simulator-card {
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        padding: 40px;
        margin-bottom: 40px;
    }
    
    .simulator-header {
        text-align: center;
        margin-bottom: 40px;
    }
    
    .simulator-title {
        font-size: 2rem;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 15px;
    }
    
    .simulator-subtitle {
        font-size: 1.1rem;
        color: #6b7280;
        line-height: 1.6;
    }
    
    .simulator-form {
        display: grid;
        gap: 25px;
    }
    
    .form-group {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    
    .form-label {
        font-weight: 600;
        color: #374151;
        font-size: 1.1rem;
    }
    
    .form-input, .form-select {
        padding: 15px 20px;
        border: 2px solid #e5e7eb;
        border-radius: 12px;
        font-size: 1rem;
        transition: border-color 0.2s ease;
    }
    
    .form-input:focus, .form-select:focus {
        outline: none;
        border-color: #14b8a6;
    }
    
    .checkbox-group {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-top: 10px;
    }
    
    .checkbox-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 15px;
        background: #f8fafc;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
    }
    
    .checkbox-item:hover {
        border-color: #14b8a6;
        background: #f0fdfa;
    }
    
    .checkbox-item input[type="checkbox"] {
        margin: 0;
    }
    
    .simulate-btn {
        background: linear-gradient(135deg, #14b8a6, #0891b2);
        color: white;
        border: none;
        padding: 18px 40px;
        border-radius: 12px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s ease;
        margin-top: 20px;
    }
    
    .simulate-btn:hover {
        transform: translateY(-2px);
    }
    
    .result-card {
        background: linear-gradient(135deg, #f0fdfa, #e6fffa);
        border: 2px solid #14b8a6;
        border-radius: 16px;
        padding: 30px;
        margin-top: 30px;
        display: none;
    }
    
    .result-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: #065f46;
        margin-bottom: 20px;
        text-align: center;
    }
    
    .result-content {
        font-size: 1.1rem;
        color: #374151;
        line-height: 1.8;
        margin-bottom: 25px;
    }
    
    .result-actions {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
    }
    
    .result-btn {
        display: inline-block;
        padding: 12px 25px;
        background: linear-gradient(135deg, #14b8a6, #0891b2);
        color: white;
        text-decoration: none;
        border-radius: 8px;
        font-weight: 600;
        transition: transform 0.2s ease;
    }
    
    .result-btn:hover {
        transform: translateY(-2px);
    }
    
    .result-btn.secondary {
        background: linear-gradient(135deg, #6b7280, #4b5563);
    }
    
    .chat-wrapper {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        overflow: hidden;
        height: calc(100vh - 200px);
        min-height: 600px;
        display: flex;
        flex-direction: column;
    }
    
    .chat-header {
        background: linear-gradient(135deg, #14b8a6, #0891b2);
        color: white;
        padding: 20px;
        text-align: center;
        position: relative;
    }
    
    .chat-title {
        font-size: 1.5rem;
        font-weight: 600;
        margin: 0;
    }
    
    .chat-subtitle {
        font-size: 0.9rem;
        margin: 5px 0 0 0;
        opacity: 0.9;
    }
    
    .chat-messages {
        flex: 1;
        padding: 20px;
        overflow-y: auto;
        background: #f8fafc;
    }
    
    .message {
        margin-bottom: 20px;
        animation: fadeInUp 0.3s ease-out;
    }
    
    .message.bot {
        display: flex;
        align-items: flex-start;
        gap: 12px;
    }
    
    .message.user {
        display: flex;
        justify-content: flex-end;
    }
    
    .bot-avatar {
        width: 40px;
        height: 40px;
        background: linear-gradient(135deg, #14b8a6, #0891b2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
        font-size: 18px;
        flex-shrink: 0;
    }
    
    .message-content {
        background: white;
        padding: 15px 20px;
        border-radius: 20px;
        max-width: 70%;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        position: relative;
    }
    
    .message.bot .message-content {
        border-bottom-left-radius: 8px;
        margin-left: 0;
    }
    
    .message.user .message-content {
        background: linear-gradient(135deg, #0891b2, #0e7490);
        color: white;
        border-bottom-right-radius: 8px;
    }
    
    .message-time {
        font-size: 0.75rem;
        color: #64748b;
        margin-top: 8px;
        opacity: 0.8;
        font-weight: 500;
    }
    
    .message.user .message-time {
        color: rgba(255, 255, 255, 0.8);
    }
    
    .suggested-questions {
        padding: 15px 20px;
        background: white;
        border-top: 1px solid #e2e8f0;
    }
    
    .suggestions-title {
        font-size: 0.9rem;
        color: #64748b;
        margin-bottom: 10px;
        font-weight: 500;
    }
    
    .suggestion-chips {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }
    
    .suggestion-chip {
        background: #f1f5f9;
        border: 1px solid #e2e8f0;
        border-radius: 20px;
        padding: 8px 16px;
        font-size: 0.85rem;
        cursor: pointer;
        transition: all 0.2s ease;
        color: #334155;
    }
    
    .suggestion-chip:hover {
        background: #e2e8f0;
        border-color: #14b8a6;
        color: #14b8a6;
    }
    
    .chat-input-area {
        padding: 20px;
        background: white;
        border-top: 1px solid #e2e8f0;
    }
    
    .input-wrapper {
        display: flex;
        gap: 12px;
        align-items: flex-end;
    }
    
    .chat-input {
        flex: 1;
        border: 2px solid #e2e8f0;
        border-radius: 25px;
        padding: 15px 20px;
        font-size: 1rem;
        resize: none;
        outline: none;
        transition: border-color 0.2s ease;
        font-family: inherit;
        max-height: 120px;
        min-height: 50px;
    }
    
    .chat-input:focus {
        border-color: #14b8a6;
    }
    
    .send-button {
        background: linear-gradient(135deg, #14b8a6, #0891b2);
        color: white;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s ease;
        font-size: 20px;
    }
    
    .send-button:hover {
        transform: scale(1.05);
    }
    
    .send-button:disabled {
        background: #94a3b8;
        cursor: not-allowed;
        transform: none;
    }
    
    .typing-indicator {
        display: none;
        padding: 15px 20px;
        background: white;
        border-radius: 20px;
        border-bottom-left-radius: 8px;
        max-width: 100px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    
    .typing-dots {
        display: flex;
        gap: 4px;
    }
    
    .typing-dot {
        width: 8px;
        height: 8px;
        background: #94a3b8;
        border-radius: 50%;
        animation: typingDot 1.5s infinite;
    }
    
    .typing-dot:nth-child(2) {
        animation-delay: 0.2s;
    }
    
    .typing-dot:nth-child(3) {
        animation-delay: 0.4s;
    }
    
    .welcome-message {
        text-align: center;
        padding: 40px 20px;
        background: linear-gradient(135deg, #e0f2fe, #b3e5fc);
        border-radius: 16px;
        margin: 20px;
        color: #0f172a;
    }
    
    .welcome-title {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 10px;
        color: #0f172a;
    }
    
    .quick-start-buttons {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
        margin-top: 20px;
    }
    
    .quick-start-btn {
        background: #f8fafc;
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        padding: 15px;
        cursor: pointer;
        transition: all 0.2s ease;
        text-align: center;
        font-size: 0.9rem;
        color: #334155;
    }
    
    .quick-start-btn:hover {
        border-color: #14b8a6;
        background: #f0fdfa;
        color: #14b8a6;
    }
    
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes typingDot {
        0%, 20% {
            transform: scale(1);
            opacity: 1;
        }
        50% {
            transform: scale(1.2);
            opacity: 0.7;
        }
        80%, 100% {
            transform: scale(1);
            opacity: 1;
        }
    }
    
    /* Mobile Responsive */
    @media (max-width: 768px) {
        .page-container {
            padding: 60px 10px 0 10px;
        }
        
        .simulator-card {
            padding: 25px;
            margin-bottom: 20px;
        }
        
        .simulator-title {
            font-size: 1.5rem;
        }
        
        .chat-wrapper {
            height: calc(100vh - 100px);
            border-radius: 12px;
        }
        
        .message-content {
            max-width: 85%;
        }
        
        .quick-start-buttons {
            grid-template-columns: 1fr;
        }
        
        .suggestion-chips {
            justify-content: center;
        }
        
        .chat-title {
            font-size: 1.2rem;
        }
        
        .checkbox-group {
            flex-direction: column;
        }
        
        .result-actions {
            flex-direction: column;
        }
    }
    
    @media (max-width: 480px) {
        .page-container {
            padding: 60px 5px 0 5px;
        }
        
        .simulator-card {
            padding: 20px;
        }
        
        .chat-wrapper {
            height: calc(100vh - 80px);
        }
        
        .chat-messages {
            padding: 15px;
        }
        
        .chat-input-area {
            padding: 15px;
        }
        
        .message-content {
            max-width: 90%;
            padding: 12px 15px;
        }
    }
    </style>
</head>
<body>
    <!-- Navigation Header -->
    <header class="header">
        <div class="container">
            <div class="nav-wrapper">
                <div class="logo">
                    <h1><a href="/">ã¿ã‚“ãªã®ç¨å‹™é¡§å•</a></h1>
                </div>
                
                <!-- Desktop Navigation -->
                <nav class="nav-desktop">
                    <a href="/#services" class="nav-link">ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹</a>
                    <a href="/#plans" class="nav-link">æ–™é‡‘</a>
                    <a href="/#cost-comparison" class="nav-link">ã‚³ã‚¹ãƒˆæ¯”è¼ƒ</a>
                </nav>
                
                <!-- Desktop CTA Button -->
                <div class="cta-desktop">
                    <a href="/#contact" class="btn btn-primary">ç”³è¾¼ã¯ã“ã¡ã‚‰</a>
                </div>
                
                <!-- Mobile Menu Button -->
                <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                
                <!-- Mobile Menu -->
                <nav class="mobile-menu" id="mobileMenu">
                    <a href="/#services" class="mobile-nav-link">ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹</a>
                    <a href="/#plans" class="mobile-nav-link">æ–™é‡‘</a>
                    <a href="/#cost-comparison" class="mobile-nav-link">ã‚³ã‚¹ãƒˆæ¯”è¼ƒ</a>
                    <a href="/#contact" class="btn btn-primary mobile-cta">ç”³è¾¼ã¯ã“ã¡ã‚‰</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Page Container -->
    <section class="page-container">
        <div class="container">
            <!-- Plan Simulator Section -->
            <div class="simulator-section">
                <div class="simulator-card">
                    <div class="simulator-header">
                        <h1 class="simulator-title">ğŸ“Š æ–™é‡‘ãƒ—ãƒ©ãƒ³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h1>
                        <p class="simulator-subtitle">ã‚ãªãŸã®äº‹æ¥­çŠ¶æ³ã«æœ€é©ãªãƒ—ãƒ©ãƒ³ã‚’ã”ææ¡ˆã„ãŸã—ã¾ã™ã€‚<br>ç°¡å˜ãªè³ªå•ã«ãŠç­”ãˆã„ãŸã ãã ã‘ã§ã€æœ€é©ãªãƒ—ãƒ©ãƒ³ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚</p>
                    </div>
                    
                    <form class="simulator-form" id="simulatorForm">
                        <div class="form-group">
                            <label class="form-label">ğŸ“ˆ å¹´é–“å£²ä¸Šé«˜ï¼ˆäºˆæƒ³ï¼‰</label>
                            <select class="form-select" id="annualRevenue" required>
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="under500">500ä¸‡å††æœªæº€</option>
                                <option value="500-1000">500ä¸‡å††ã€œ1,000ä¸‡å††æœªæº€</option>
                                <option value="1000-3000">1,000ä¸‡å††ã€œ3,000ä¸‡å††</option>
                                <option value="over3000">3,000ä¸‡å††ä»¥ä¸Š</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">ğŸ¢ äº‹æ¥­å½¢æ…‹</label>
                            <select class="form-select" id="businessType" required>
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="individual">å€‹äººäº‹æ¥­ä¸»</option>
                                <option value="corporation">æ³•äºº</option>
                                <option value="considering">æ³•äººåŒ–ã‚’æ¤œè¨ä¸­</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">ğŸ“‹ è©²å½“ã™ã‚‹é …ç›®ã‚’ã™ã¹ã¦é¸æŠã—ã¦ãã ã•ã„</label>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" id="invoiceRegistered" value="invoice">
                                    <span>ã‚¤ãƒ³ãƒœã‚¤ã‚¹ç™ºè¡Œäº‹æ¥­è€…ã¨ã—ã¦ç™»éŒ²æ¸ˆã¿</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="over1000Before" value="over1000_before">
                                    <span>2å¹´å‰ã®å£²ä¸ŠãŒ1,000ä¸‡å††ã‚’è¶…ãˆã¦ã„ã‚‹</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="over1000Recent" value="over1000_recent">
                                    <span>å‰å¹´å‰åŠ6ãƒ¶æœˆã®å£²ä¸ŠãŒ1,000ä¸‡å††ã‚’è¶…ãˆã¦ã„ã‚‹</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="voluntaryTaxable" value="voluntary">
                                    <span>ä»»æ„ã§èª²ç¨äº‹æ¥­è€…ã‚’é¸æŠã—ã¦ã„ã‚‹</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="blueReturn" value="blue_return">
                                    <span>é’è‰²ç”³å‘Šã‚’å¸Œæœ›</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="cryptoFx" value="crypto_fx">
                                    <span>æš—å·è³‡ç”£ãƒ»ä»®æƒ³é€šè²¨ã®FXã§ã®åˆ©ç›ŠãŒã‚ã‚‹</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="reselling" value="reselling">
                                    <span>ã›ã©ã‚Šãƒ»è¼¸å…¥ãƒ»è»¢å£²ã§ã®åˆ©ç›ŠãŒã‚ã‚‹</span>
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">ğŸ“ æœˆé–“å–å¼•ä»¶æ•°ï¼ˆäºˆæƒ³ï¼‰</label>
                            <select class="form-select" id="monthlyTransactions">
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="under50">50ä»¶æœªæº€</option>
                                <option value="50-100">50ã€œ100ä»¶</option>
                                <option value="100-200">100ã€œ200ä»¶</option>
                                <option value="over200">200ä»¶ä»¥ä¸Š</option>
                            </select>
                        </div>

                        <button type="submit" class="simulate-btn">ğŸ’¡ æœ€é©ãªãƒ—ãƒ©ãƒ³ã‚’è¨ºæ–­ã™ã‚‹</button>
                    </form>

                    <div class="result-card" id="resultCard">
                        <div class="result-title" id="resultTitle"></div>
                        <div class="result-content" id="resultContent"></div>
                        <div class="result-actions" id="resultActions"></div>
                    </div>
                </div>
            </div>

            <!-- Chatbot Container -->
            <div class="chat-wrapper">
                <!-- Chat Header -->
                <div class="chat-header">
                    <h2 class="chat-title">ğŸ’¬ ã¿ã‚“ãªã®ç¨å‹™é¡§å• ãƒãƒ£ãƒƒãƒˆã‚µãƒãƒ¼ãƒˆ</h2>
                    <p class="chat-subtitle">ç¨å‹™ã«é–¢ã™ã‚‹ã”è³ªå•ã«ãŠç­”ãˆã—ã¾ã™</p>
                </div>
                
                <!-- Chat Messages Area -->
                <div class="chat-messages" id="chatMessages">
                    <!-- Welcome Message -->
                    <div class="welcome-message" id="welcomeMessage">
                        <h3 class="welcome-title">ğŸ‰ ãƒãƒ£ãƒƒãƒˆã‚µãƒãƒ¼ãƒˆã¸ã‚ˆã†ã“ãï¼</h3>
                        <p>ç¨å‹™ã«é–¢ã™ã‚‹ã”è³ªå•ã‚„ã‚µãƒ¼ãƒ“ã‚¹ã«ã¤ã„ã¦ã€ãŠæ°—è»½ã«ãŠèããã ã•ã„ã€‚<br>
                        ã‚ˆãã‚ã‚‹ã”è³ªå•ã‹ã‚‰é¸ã‚“ã§ã„ãŸã ãã‹ã€ç›´æ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
                        
                        <div class="quick-start-buttons">
                            <div class="quick-start-btn" onclick="sendQuickQuestion('ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹ã‚’æ•™ãˆã¦')">
                                ğŸ“‹ ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹
                            </div>
                            <div class="quick-start-btn" onclick="sendQuickQuestion('æ–™é‡‘ã«ã¤ã„ã¦æ•™ãˆã¦')">
                                ğŸ’° æ–™é‡‘ã«ã¤ã„ã¦
                            </div>
                            <div class="quick-start-btn" onclick="sendQuickQuestion('å¥‘ç´„æœŸé–“ã«ã¤ã„ã¦')">
                                ğŸ“ å¥‘ç´„ã«ã¤ã„ã¦
                            </div>
                            <div class="quick-start-btn" onclick="sendQuickQuestion('ç¢ºå®šç”³å‘Šã«ã¤ã„ã¦')">
                                ğŸ“Š ç¢ºå®šç”³å‘Š
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Typing Indicator -->
                <div class="message bot" id="typingIndicator" style="display: none;">
                    <div class="bot-avatar">AI</div>
                    <div class="typing-indicator">
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Suggested Questions -->
                <div class="suggested-questions" id="suggestedQuestions">
                    <div class="suggestions-title">ğŸ’¡ ã‚ˆãã‚ã‚‹ã”è³ªå•</div>
                    <div class="suggestion-chips">
                        <div class="suggestion-chip" onclick="sendQuickQuestion('ä»–ã®ç¨ç†å£«äº‹å‹™æ‰€ã¨ã®é•ã„ã¯ï¼Ÿ')">ä»–ç¤¾ã¨ã®é•ã„</div>
                        <div class="suggestion-chip" onclick="sendQuickQuestion('é ˜åæ›¸ã®æ’®å½±æ–¹æ³•ã¯ï¼Ÿ')">é ˜åæ›¸æ’®å½±</div>
                        <div class="suggestion-chip" onclick="sendQuickQuestion('æ¶ˆè²»ç¨ç”³å‘ŠãŒå¿…è¦ã‹ï¼Ÿ')">æ¶ˆè²»ç¨ç”³å‘Š</div>
                        <div class="suggestion-chip" onclick="sendQuickQuestion('é’è‰²ç”³å‘Šã‚’ã—ãŸã„')">é’è‰²ç”³å‘Š</div>
                        <div class="suggestion-chip" onclick="sendQuickQuestion('é›»è©±ã§ç›¸è«‡ã—ãŸã„')">é›»è©±ç›¸è«‡</div>
                    </div>
                </div>
                
                <!-- Chat Input Area -->
                <div class="chat-input-area">
                    <div class="input-wrapper">
                        <textarea 
                            class="chat-input" 
                            id="chatInput" 
                            placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."
                            rows="1"
                            onkeydown="handleInputKeydown(event)"
                            oninput="autoResize(this)"
                        ></textarea>
                        <button class="send-button" id="sendButton" onclick="sendMessage()">
                            â¤
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // FAQ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆæ‹¡å……ç‰ˆï¼‰
        const faqDatabase = {
            // ã‚µãƒ¼ãƒ“ã‚¹ã«ã¤ã„ã¦
            "ã©ã®ã‚ˆã†ãªã‚µãƒ¼ãƒ“ã‚¹": {
                answer: "å¹´å•†1,000ä¸‡å††ä»¥ä¸‹ã®å€‹äººäº‹æ¥­ä¸»ã‚„ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã®æ–¹å‘ã‘ã«ã€AIã‚’æ´»ç”¨ã—ä½ä¾¡æ ¼ã§ç¨å‹™é¡§å•ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ãƒãƒ£ãƒƒãƒˆã§ã®ç¨å‹™ç›¸è«‡ã€è¨˜å¸³ä»£è¡Œã€ç¢ºå®šç”³å‘Šã®ã‚µãƒãƒ¼ãƒˆã‚’ä¸»ãªã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦ã„ã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹": {
                answer: "ä¸»ã«ä»¥ä¸‹ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¦ã„ã¾ã™ï¼š\n\nâ€¢ Chatworkã§ã®ç¨å‹™ç›¸è«‡\nâ€¢ è¨˜å¸³ä»£è¡Œ\nâ€¢ ç¢ºå®šç”³å‘Šæ›¸ã¾ãŸã¯æ±ºç®—ç”³å‘Šæ›¸ã®ä½œæˆãƒ»æå‡º\nâ€¢ ç¯€ç¨ã‚„è³‡é‡‘ç¹°ã‚Šã«é–¢ã™ã‚‹æƒ…å ±æä¾›\n\næœˆé¡980å††ï¼ˆç¨è¾¼ï¼‰ã‹ã‚‰åˆ©ç”¨ã§ãã‚‹ã€å°è¦æ¨¡äº‹æ¥­è€…ç‰¹åŒ–ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "ä»–ã®ç¨ç†å£«äº‹å‹™æ‰€ã¨ã®é•ã„": {
                answer: "æœ€æ–°AIã®æ´»ç”¨ã«ã‚ˆã‚Šã€æœˆé¡980å††ï¼ˆç¨è¾¼ï¼‰ã‹ã‚‰ã¨ã„ã†åœ§å€’çš„ãªä½ä¾¡æ ¼ã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ç‚¹ãŒæœ€å¤§ã®ç‰¹å¾´ã§ã™ã€‚å°è¦æ¨¡äº‹æ¥­è€…ã«ç‰¹åŒ–ã™ã‚‹ã“ã¨ã§ã€æ‰‹åšã„ã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "AIãŒå¯¾å¿œ": {
                answer: "ã„ã„ãˆã€ã”ç›¸è«‡ã«ã¯AIã§ã¯ãªãã€æ‹…å½“è€…ãŒç›´æ¥å¯¾å¿œã„ãŸã—ã¾ã™ã®ã§ã”å®‰å¿ƒãã ã•ã„ã€‚AIã¯æ¥­å‹™åŠ¹ç‡åŒ–ã®ãŸã‚ã«æ´»ç”¨ã—ã¦ã„ã¾ã™ãŒã€ãŠå®¢æ§˜ã¨ã®ç›¸è«‡ã¯äººãŒå¯¾å¿œã—ã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },

            // æ–°è¦è¿½åŠ FAQ
            "é ˜åæ›¸ã®æ’®å½±": {
                answer: "ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§æ’®å½±ã€ã¾ãŸã¯ã‚¹ã‚­ãƒ£ãƒ³ã—ãŸãƒ‡ãƒ¼ã‚¿ã§æ’®å½±ã‚’ã—ã¦ãã ã•ã„ã€‚æ’®å½±å¾Œã¯ã€ã“ã¡ã‚‰ã‹ã‚‰ãŠæ¸¡ã—ã™ã‚‹Googleãƒ‰ãƒ©ã‚¤ãƒ–ã®å°‚ç”¨ãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜ã—ã¦ã„ãŸã ãã¾ã™ã€‚é®®æ˜ã«å†™ã‚‹ã‚ˆã†ã€æ˜ã‚‹ã„å ´æ‰€ã§æ’®å½±ã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "é ˜åæ›¸æ’®å½±": {
                answer: "ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§æ’®å½±ã€ã¾ãŸã¯ã‚¹ã‚­ãƒ£ãƒ³ã—ãŸãƒ‡ãƒ¼ã‚¿ã§æ’®å½±ã‚’ã—ã¦ãã ã•ã„ã€‚æ’®å½±å¾Œã¯ã€ã“ã¡ã‚‰ã‹ã‚‰ãŠæ¸¡ã—ã™ã‚‹Googleãƒ‰ãƒ©ã‚¤ãƒ–ã®å°‚ç”¨ãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜ã—ã¦ã„ãŸã ãã¾ã™ã€‚é®®æ˜ã«å†™ã‚‹ã‚ˆã†ã€æ˜ã‚‹ã„å ´æ‰€ã§æ’®å½±ã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "æ±ºæ¸ˆã•ã‚Œãªã„": {
                answer: "ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ãŒã€ã”å¥‘ç´„ãƒ»æ±ºæ¸ˆå®Œäº†å¾Œã«Chatworkã§ã®ç¨å‹™ç›¸è«‡ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚ã¾ãšã¯ãŠç”³ã—è¾¼ã¿æ‰‹ç¶šãã‚’å®Œäº†ã—ã¦ã„ãŸã ãã€æ±ºæ¸ˆç¢ºèªå¾Œã«ã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹å§‹ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚",
                category: "å¥‘ç´„"
            },
            "ãƒãƒ£ãƒƒãƒˆä¸å¯": {
                answer: "ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ãŒã€ã”å¥‘ç´„ãƒ»æ±ºæ¸ˆå®Œäº†å¾Œã«Chatworkã§ã®ç¨å‹™ç›¸è«‡ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚ã¾ãšã¯ãŠç”³ã—è¾¼ã¿æ‰‹ç¶šãã‚’å®Œäº†ã—ã¦ã„ãŸã ãã€æ±ºæ¸ˆç¢ºèªå¾Œã«ã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹å§‹ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚",
                category: "å¥‘ç´„"
            },
            "æ¶ˆè²»ç¨ç”³å‘Š": {
                answer: "æ¶ˆè²»ç¨ã®ç”³å‘ŠãŒå¿…è¦ã«ãªã‚‹ã®ã¯ã€ä¸»ã«æ¬¡ã®ã„ãšã‚Œã‹ã«å½“ã¦ã¯ã¾ã‚‹ã€Œèª²ç¨äº‹æ¥­è€…ã€ã§ã™ï¼š\n\nâ€¢ ã‚¤ãƒ³ãƒœã‚¤ã‚¹ç™ºè¡Œäº‹æ¥­è€…ï¼ˆé©æ ¼è«‹æ±‚æ›¸ç™ºè¡Œäº‹æ¥­è€…ï¼‰ã®ç™»éŒ²ã‚’ã—ã¦ã„ã‚‹\nâ€¢ 2å¹´å‰ï¼ˆåŸºæº–æœŸé–“ï¼‰ã®èª²ç¨å£²ä¸Šé«˜ãŒ1,000ä¸‡å††ã‚’è¶…ãˆã¦ã„ã‚‹\nâ€¢ å‰å¹´ã®å‰åŠ6ãƒ¶æœˆï¼ˆç‰¹å®šæœŸé–“ï¼‰ã®èª²ç¨å£²ä¸Šé«˜ã¾ãŸã¯çµ¦ä¸æ”¯æ‰•é¡ãŒ1,000ä¸‡å††ã‚’è¶…ãˆã¦ã„ã‚‹\nâ€¢ ä»»æ„ã§èª²ç¨äº‹æ¥­è€…ã«ãªã‚‹ã“ã¨ã‚’é¸æŠã—ã¦ã„ã‚‹\n\nã©ã¡ã‚‰ã®ã‚¿ã‚¤ãƒ—ã«è©²å½“ã™ã‚‹ã‹ã€ãŠæ°—è»½ã«ã”ç›¸è«‡ãã ã•ã„ã€‚",
                category: "ç”³å‘Š"
            },
            "æ¶ˆè²»ç¨": {
                answer: "æ¶ˆè²»ç¨ã®ç”³å‘ŠãŒå¿…è¦ã«ãªã‚‹ã®ã¯ã€ä¸»ã«æ¬¡ã®ã„ãšã‚Œã‹ã«å½“ã¦ã¯ã¾ã‚‹ã€Œèª²ç¨äº‹æ¥­è€…ã€ã§ã™ï¼š\n\nâ€¢ ã‚¤ãƒ³ãƒœã‚¤ã‚¹ç™ºè¡Œäº‹æ¥­è€…ï¼ˆé©æ ¼è«‹æ±‚æ›¸ç™ºè¡Œäº‹æ¥­è€…ï¼‰ã®ç™»éŒ²ã‚’ã—ã¦ã„ã‚‹\nâ€¢ 2å¹´å‰ï¼ˆåŸºæº–æœŸé–“ï¼‰ã®èª²ç¨å£²ä¸Šé«˜ãŒ1,000ä¸‡å††ã‚’è¶…ãˆã¦ã„ã‚‹\nâ€¢ å‰å¹´ã®å‰åŠ6ãƒ¶æœˆï¼ˆç‰¹å®šæœŸé–“ï¼‰ã®èª²ç¨å£²ä¸Šé«˜ã¾ãŸã¯çµ¦ä¸æ”¯æ‰•é¡ãŒ1,000ä¸‡å††ã‚’è¶…ãˆã¦ã„ã‚‹\nâ€¢ ä»»æ„ã§èª²ç¨äº‹æ¥­è€…ã«ãªã‚‹ã“ã¨ã‚’é¸æŠã—ã¦ã„ã‚‹\n\nã©ã¡ã‚‰ã®ã‚¿ã‚¤ãƒ—ã«è©²å½“ã™ã‚‹ã‹ã€ãŠæ°—è»½ã«ã”ç›¸è«‡ãã ã•ã„ã€‚",
                category: "ç”³å‘Š"
            },
            "æ—¥å‰²ã‚Š": {
                answer: "ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ãŒã€æ—¥å‰²ã‚Šè¨ˆç®—ã§ã®æ–™é‡‘è¨­å®šã¯ã”ã–ã„ã¾ã›ã‚“ã€‚æœˆé¡åˆ¶ã§ã®ã”å¥‘ç´„ã¨ãªã‚Šã¾ã™ã€‚ã”å¥‘ç´„æœˆã®é€”ä¸­ã‹ã‚‰ã§ã‚‚ã€1ãƒ¶æœˆåˆ†ã®æ–™é‡‘ã‚’ãŠæ”¯æ‰•ã„ã„ãŸã ãå½¢ã¨ãªã‚Šã¾ã™ã€‚",
                category: "æ–™é‡‘"
            },
            "é’è‰²ç”³å‘Š": {
                answer: "é’è‰²ç”³å‘Šã®ç”³è«‹ã«ã¤ãã¾ã—ã¦ã¯ã€ã”è‡ªèº«ã§ç¨å‹™ç½²ã¸ãŠæ‰‹ç¶šãã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚ç”³è«‹æ›¸ã®æ›¸ãæ–¹ã‚„æ‰‹ç¶šãã«ã¤ã„ã¦ã®ã”è³ªå•ã¯ã€Chatworkã«ã¦ã‚µãƒãƒ¼ãƒˆã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚",
                category: "ç”³å‘Š"
            },
            "é’è‰²ç”³å‘Šã‚’ã—ãŸã„": {
                answer: "é’è‰²ç”³å‘Šã®ç”³è«‹ã«ã¤ãã¾ã—ã¦ã¯ã€ã”è‡ªèº«ã§ç¨å‹™ç½²ã¸ãŠæ‰‹ç¶šãã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚ç”³è«‹æ›¸ã®æ›¸ãæ–¹ã‚„æ‰‹ç¶šãã«ã¤ã„ã¦ã®ã”è³ªå•ã¯ã€Chatworkã«ã¦ã‚µãƒãƒ¼ãƒˆã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚",
                category: "ç”³å‘Š"
            },
            "ç”³è«‹é–¢é€£": {
                answer: "å„ç¨®ç¨å‹™ç½²ã¸ã®ç”³è«‹æ‰‹ç¶šãã«ã¤ãã¾ã—ã¦ã¯ã€ã”è‡ªèº«ã§ãŠæ‰‹ç¶šãã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚ç”³è«‹æ›¸ã®è¨˜è¼‰æ–¹æ³•ã‚„æ‰‹ç¶šãã®æµã‚Œã«ã¤ã„ã¦ã¯ã€Chatworkã«ã¦ã‚µãƒãƒ¼ãƒˆã„ãŸã—ã¾ã™ã€‚",
                category: "ãã®ä»–"
            },
            "å¤ç‰©å•†": {
                answer: "å¤ç‰©å•†ã®å±Šå‡ºã«ã¤ãã¾ã—ã¦ã¯ã€ã”è‡ªèº«ã§è­¦å¯Ÿç½²ã¸ãŠæ‰‹ç¶šãã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚å¤ç‰©å•†ã«é–¢ã™ã‚‹ç¨å‹™ä¸Šã®å–ã‚Šæ‰±ã„ã«ã¤ã„ã¦ã¯ã€Chatworkã«ã¦ã”ç›¸è«‡ã„ãŸã ã‘ã¾ã™ã€‚",
                category: "ãã®ä»–"
            },
            "ãƒãƒãƒ¼ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰": {
                answer: "ãƒãƒãƒ¼ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã‹ã‚‰freeeã¸ã®å¤‰æ›´ã€ã¾ãŸã¯ãã®é€†ã®å¤‰æ›´ã‚‚å¯èƒ½ã§ã™ã€‚ä¼šè¨ˆã‚½ãƒ•ãƒˆã®å¤‰æ›´ã‚’ã”å¸Œæœ›ã®å ´åˆã¯ã€ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã®æ–¹æ³•ã‚„è¨­å®šã«ã¤ã„ã¦ã‚µãƒãƒ¼ãƒˆã„ãŸã—ã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "freee": {
                answer: "freeeã‹ã‚‰ãƒãƒãƒ¼ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã¸ã®å¤‰æ›´ã€ã¾ãŸã¯ãã®é€†ã®å¤‰æ›´ã‚‚å¯èƒ½ã§ã™ã€‚ä¼šè¨ˆã‚½ãƒ•ãƒˆã®å¤‰æ›´ã‚’ã”å¸Œæœ›ã®å ´åˆã¯ã€ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã®æ–¹æ³•ã‚„è¨­å®šã«ã¤ã„ã¦ã‚µãƒãƒ¼ãƒˆã„ãŸã—ã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "é›»è©±ã—ãŸã„": {
                answer: "ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ãŒã€ãŠé›»è©±ã§ã®ã‚µãƒãƒ¼ãƒˆã¯è¡Œã£ã¦ãŠã‚Šã¾ã›ã‚“ã€‚ã”è³ªå•ãƒ»ã”ç›¸è«‡ã¯ã€ã“ã¡ã‚‰ã®ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã¾ãŸã¯ã”å¥‘ç´„å¾Œã®Chatworkã«ã¦ãŠå—ã‘ã—ã¦ãŠã‚Šã¾ã™ã€‚ã‚ˆã‚ŠåŠ¹ç‡çš„ã«ã‚µãƒãƒ¼ãƒˆã‚’ã”æä¾›ã™ã‚‹ãŸã‚ã€ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã§ã®ã‚„ã‚Šå–ã‚Šã‚’ãŠé¡˜ã„ã—ã¦ãŠã‚Šã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "é›»è©±": {
                answer: "ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ãŒã€ãŠé›»è©±ã§ã®ã‚µãƒãƒ¼ãƒˆã¯è¡Œã£ã¦ãŠã‚Šã¾ã›ã‚“ã€‚ã”è³ªå•ãƒ»ã”ç›¸è«‡ã¯ã€ã“ã¡ã‚‰ã®ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã¾ãŸã¯ã”å¥‘ç´„å¾Œã®Chatworkã«ã¦ãŠå—ã‘ã—ã¦ãŠã‚Šã¾ã™ã€‚ã‚ˆã‚ŠåŠ¹ç‡çš„ã«ã‚µãƒãƒ¼ãƒˆã‚’ã”æä¾›ã™ã‚‹ãŸã‚ã€ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã§ã®ã‚„ã‚Šå–ã‚Šã‚’ãŠé¡˜ã„ã—ã¦ãŠã‚Šã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "ãƒ¡ãƒ¼ãƒ«": {
                answer: "ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ãŒã€ãƒ¡ãƒ¼ãƒ«ã§ã®ã‚µãƒãƒ¼ãƒˆã¯è¡Œã£ã¦ãŠã‚Šã¾ã›ã‚“ã€‚ã”è³ªå•ãƒ»ã”ç›¸è«‡ã¯ã€ã“ã¡ã‚‰ã®ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã¾ãŸã¯ã”å¥‘ç´„å¾Œã®Chatworkã«ã¦ãŠå—ã‘ã—ã¦ãŠã‚Šã¾ã™ã€‚ã™ã¹ã¦ã®ãŠå•ã„åˆã‚ã›ã¯ãƒãƒ£ãƒƒãƒˆãƒ™ãƒ¼ã‚¹ã§æ‰¿ã£ã¦ãŠã‚Šã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "éŠ€è¡Œå£åº§": {
                answer: "éŠ€è¡Œå£åº§ã‚„ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã®é€£æºã¯ã€ã‚¯ãƒ©ã‚¦ãƒ‰ä¼šè¨ˆã‚½ãƒ•ãƒˆï¼ˆãƒãƒãƒ¼ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã¾ãŸã¯freeeï¼‰ã§é€£æºã‚’ã—ã¦ã„ãŸã ãã¾ã™ã€‚é€£æºæ–¹æ³•ã«ã¤ã„ã¦ã¯Chatworkã«ã¦ã‚µãƒãƒ¼ãƒˆã„ãŸã—ã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰": {
                answer: "éŠ€è¡Œå£åº§ã‚„ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã®é€£æºã¯ã€ã‚¯ãƒ©ã‚¦ãƒ‰ä¼šè¨ˆã‚½ãƒ•ãƒˆï¼ˆãƒãƒãƒ¼ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã¾ãŸã¯freeeï¼‰ã§é€£æºã‚’ã—ã¦ã„ãŸã ãã¾ã™ã€‚é€£æºæ–¹æ³•ã«ã¤ã„ã¦ã¯Chatworkã«ã¦ã‚µãƒãƒ¼ãƒˆã„ãŸã—ã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "æš—å·è³‡ç”£": {
                answer: "æš—å·è³‡ç”£ãƒ»ä»®æƒ³é€šè²¨ã®FXã§åˆ©ç›ŠãŒå‡ºãŸå ´åˆã€å¹´é–“å£²ä¸ŠãŒ1,000ä¸‡å††æœªæº€ã§ã‚ã‚Œã°ã€ã“ã¡ã‚‰ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã”å¯¾å¿œå¯èƒ½ã§ã™ã€‚æš—å·è³‡ç”£ã®ç¨å‹™å‡¦ç†ã«ã¤ã„ã¦ã‚‚ã‚µãƒãƒ¼ãƒˆã„ãŸã—ã¾ã™ã€‚",
                category: "ç”³å‘Š"
            },
            "ä»®æƒ³é€šè²¨": {
                answer: "æš—å·è³‡ç”£ãƒ»ä»®æƒ³é€šè²¨ã®FXã§åˆ©ç›ŠãŒå‡ºãŸå ´åˆã€å¹´é–“å£²ä¸ŠãŒ1,000ä¸‡å††æœªæº€ã§ã‚ã‚Œã°ã€ã“ã¡ã‚‰ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã”å¯¾å¿œå¯èƒ½ã§ã™ã€‚æš—å·è³‡ç”£ã®ç¨å‹™å‡¦ç†ã«ã¤ã„ã¦ã‚‚ã‚µãƒãƒ¼ãƒˆã„ãŸã—ã¾ã™ã€‚",
                category: "ç”³å‘Š"
            },
            "ã›ã©ã‚Š": {
                answer: "ã›ã©ã‚Šãƒ»è¼¸å…¥ãƒ»è»¢å£²ã§åˆ©ç›ŠãŒã‚ã‚‹å ´åˆã€å¹´é–“å£²ä¸ŠãŒ1,000ä¸‡å††ä»¥ä¸‹ã§ã‚ã‚Œã°ã‚µãƒ¼ãƒ“ã‚¹å¯¾è±¡ã¨ãªã‚Šã¾ã™ã€‚ç‰©è²©äº‹æ¥­ã®ç¨å‹™å‡¦ç†ã«ã¤ã„ã¦ã‚‚ã‚µãƒãƒ¼ãƒˆã„ãŸã—ã¾ã™ã€‚",
                category: "ç”³å‘Š"
            },
            "è»¢å£²": {
                answer: "ã›ã©ã‚Šãƒ»è¼¸å…¥ãƒ»è»¢å£²ã§åˆ©ç›ŠãŒã‚ã‚‹å ´åˆã€å¹´é–“å£²ä¸ŠãŒ1,000ä¸‡å††ä»¥ä¸‹ã§ã‚ã‚Œã°ã‚µãƒ¼ãƒ“ã‚¹å¯¾è±¡ã¨ãªã‚Šã¾ã™ã€‚ç‰©è²©äº‹æ¥­ã®ç¨å‹™å‡¦ç†ã«ã¤ã„ã¦ã‚‚ã‚µãƒãƒ¼ãƒˆã„ãŸã—ã¾ã™ã€‚",
                category: "ç”³å‘Š"
            },
            "è¼¸å…¥": {
                answer: "ã›ã©ã‚Šãƒ»è¼¸å…¥ãƒ»è»¢å£²ã§åˆ©ç›ŠãŒã‚ã‚‹å ´åˆã€å¹´é–“å£²ä¸ŠãŒ1,000ä¸‡å††ä»¥ä¸‹ã§ã‚ã‚Œã°ã‚µãƒ¼ãƒ“ã‚¹å¯¾è±¡ã¨ãªã‚Šã¾ã™ã€‚ç‰©è²©äº‹æ¥­ã®ç¨å‹™å‡¦ç†ã«ã¤ã„ã¦ã‚‚ã‚µãƒãƒ¼ãƒˆã„ãŸã—ã¾ã™ã€‚",
                category: "ç”³å‘Š"
            },

            // æ—¢å­˜ã®FAQ
            "googleãƒ‰ãƒ©ã‚¤ãƒ–": {
                answer: "ã”å¥‘ç´„å¾Œã«ã€ãŠå®¢æ§˜å°‚ç”¨ã®Googleãƒ‰ãƒ©ã‚¤ãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã€ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’ä»˜ä¸ã„ãŸã—ã¾ã™ã€‚ã“ã¡ã‚‰ã®ãƒ•ã‚©ãƒ«ãƒ€ã«é ˜åæ›¸ã‚„ãƒ¬ã‚·ãƒ¼ãƒˆã€ãã®ä»–ã®è³‡æ–™ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã„ãŸã ã‘ã‚Œã°ã€æ‹…å½“è€…ãŒç¢ºèªã—ã¦è¨˜å¸³ä»£è¡Œã‚’è¡Œã„ã¾ã™ã€‚ãƒ•ã‚©ãƒ«ãƒ€ã¯æ•´ç†ã•ã‚ŒãŸæ§‹é€ ã«ãªã£ã¦ãŠã‚Šã€æœˆåˆ¥ãƒ»ã‚«ãƒ†ã‚´ãƒªåˆ¥ã«ä¿å­˜ã—ã¦ã„ãŸã ã‘ã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "è³‡æ–™å…±æœ‰": {
                answer: "è³‡æ–™å…±æœ‰ã¯Googleãƒ‰ãƒ©ã‚¤ãƒ–ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã”å¥‘ç´„å¾Œã«ã€ãŠå®¢æ§˜å°‚ç”¨ã®ãƒ•ã‚©ãƒ«ãƒ€ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’ä»˜ä¸ã„ãŸã—ã¾ã™ã€‚é ˜åæ›¸ã€ãƒ¬ã‚·ãƒ¼ãƒˆã€è«‹æ±‚æ›¸ã€éŠ€è¡Œé€šå¸³ã®ã‚³ãƒ”ãƒ¼ãªã©ã€å¿…è¦ãªè³‡æ–™ã‚’ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§æ’®å½±ã¾ãŸã¯ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦ã€æŒ‡å®šãƒ•ã‚©ãƒ«ãƒ€ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "1000ä¸‡å††": {
                answer: "ã€Œã¿ã‚“ãªã®ç¨å‹™é¡§å•ã€ã¯å¹´å•†1,000ä¸‡å††æœªæº€ã®äº‹æ¥­è€…æ§˜ã‚’å¯¾è±¡ã¨ã—ãŸã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚ã”å¥‘ç´„å‰ã‹ã‚‰1,000ä¸‡å††ã‚’è¶…ãˆã‚‹è¦‹è¾¼ã¿ã®å ´åˆã‚„ã€ã”å¥‘ç´„æœŸé–“ã®é€”ä¸­ã§å¹´å•†ãŒ1,000ä¸‡å††ã‚’è¶…ãˆãŸå ´åˆã¯ã€é‹å–¶æ¯ä½“ã§ã‚ã‚‹ã€Œã‚½ãƒ«ãƒ“ã‚¹ç¨ç†å£«æ³•äººã€ã¨ã®ã”å¥‘ç´„ã«åˆ‡ã‚Šæ›¿ãˆã¦ã€å¼•ãç¶šãã‚µãƒãƒ¼ãƒˆã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "å¯¾é¢": {
                answer: "åŸºæœ¬çš„ã«ã¯Chatworkã§ã®ã‚„ã‚Šå–ã‚Šã¨ãªã‚Šã€å¯¾é¢ã‚„ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ã®é¢è«‡ã¯è¡Œã£ã¦ãŠã‚Šã¾ã›ã‚“ã€‚æ—¥å¸¸çš„ãªã”ç›¸è«‡ã‚„ã”è³ªå•ã¯ã€Chatworkã‚’é€šã˜ã¦æ‹…å½“è€…ãŒç›´æ¥å¯¾å¿œã„ãŸã—ã¾ã™ã€‚æ¥­å‹™ã‚’åŠ¹ç‡åŒ–ã™ã‚‹ã“ã¨ã§ãŠæ‰‹é ƒãªä¾¡æ ¼ã‚’å®Ÿç¾ã—ã¦ãŠã‚Šã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "chatwork": {
                answer: "ã¯ã„ã€ã”å¥‘ç´„å¾Œã¯Chatworkã‚’ä½¿ç”¨ã—ã¦ã‚„ã‚Šå–ã‚Šã‚’ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚Chatworkã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„å ´åˆã¯ã€ç„¡æ–™ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆãŒå¯èƒ½ã§ã™ã€‚æ‹…å½“è€…ãŒå°‚ç”¨ã®ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒ£ãƒƒãƒˆã‚’ä½œæˆã—ã€ç¨å‹™ç›¸è«‡ã‹ã‚‰æ—¥å¸¸çš„ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¾ã§ã€ã™ã¹ã¦Chatworkä¸Šã§è¡Œã„ã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },
            "ãƒãƒ£ãƒƒãƒˆãƒ¯ãƒ¼ã‚¯": {
                answer: "ã¯ã„ã€ã”å¥‘ç´„å¾Œã¯Chatworkã‚’ä½¿ç”¨ã—ã¦ã‚„ã‚Šå–ã‚Šã‚’ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚Chatworkã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„å ´åˆã¯ã€ç„¡æ–™ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆãŒå¯èƒ½ã§ã™ã€‚æ‹…å½“è€…ãŒå°‚ç”¨ã®ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒ£ãƒƒãƒˆã‚’ä½œæˆã—ã€ç¨å‹™ç›¸è«‡ã‹ã‚‰æ—¥å¸¸çš„ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¾ã§ã€ã™ã¹ã¦Chatworkä¸Šã§è¡Œã„ã¾ã™ã€‚",
                category: "ã‚µãƒ¼ãƒ“ã‚¹"
            },

            // æ–™é‡‘ã«ã¤ã„ã¦
            "æ–™é‡‘": {
                answer: "æ–™é‡‘ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š\n\nâ€¢ æœˆé¡é¡§å•æ–™: 980å††ï¼ˆç¨è¾¼ï¼‰\nâ€¢ æœˆé–“è¨˜å¸³ä»£è¡Œæ–™: 2,980å††ï½ï¼ˆç¨è¾¼ï¼‰/100ä»¶ã‚ãŸã‚Š\nâ€¢ ç”³å‘Šæ–™: 39,800å††ï¼ˆç¨è¾¼ï¼‰\nâ€¢ æ¶ˆè²»ç¨ç”³å‘Šæ–™: 29,800å††ï¼ˆç¨è¾¼ï¼‰â€»åˆ¥é€”\nâ€¢ æœˆé–“ä¼šè¨ˆã‚·ã‚¹ãƒ†ãƒ æ–™: 980å††ï¼ˆç¨è¾¼ï¼‰\n\nè©³ç´°ãªæ–™é‡‘ã«ã¤ã„ã¦ã¯ã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’ã”ç¢ºèªãã ã•ã„ã€‚",
                category: "æ–™é‡‘"
            },
            "å¥‘ç´„æœŸé–“": {
                answer: "ã¯ã„ã€åˆå›ã®ã”å¥‘ç´„ã‹ã‚‰1å¹´é–“ã®æœ€ä½åˆ©ç”¨æœŸé–“ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚æœŸé–“æº€äº†ã®7æ—¥å‰ã¾ã§ã«è§£ç´„ã®ãŠç”³ã—å‡ºãŒãªã„å ´åˆã€12ãƒ¶æœˆã”ã¨ã«è‡ªå‹•ã§æ›´æ–°ã•ã‚Œã¾ã™ã€‚",
                category: "å¥‘ç´„"
            },
            "é€”ä¸­è§£ç´„": {
                answer: "æœ€ä½åˆ©ç”¨æœŸé–“å†…ã«è§£ç´„ã•ã‚Œã‚‹å ´åˆã€æ®‹ã‚Šã®æœŸé–“åˆ†ã®åˆ©ç”¨æ–™é‡‘ã«ç›¸å½“ã™ã‚‹é‡‘é¡ã‚’é•ç´„é‡‘ã¨ã—ã¦ãŠæ”¯æ‰•ã„ã„ãŸã ãå¿…è¦ãŒã‚ã‚Šã€è¿”é‡‘ã¯ã”ã–ã„ã¾ã›ã‚“ã€‚",
                category: "å¥‘ç´„"
            },
            "æ”¯æ‰•ã„æ–¹æ³•": {
                answer: "ã”å¥‘ç´„æ™‚ã«ã€åŸºæœ¬æ–™é‡‘ãƒ»è¨˜å¸³ä»£è¡Œæ–™é‡‘ãƒ»ä¼šè¨ˆã‚½ãƒ•ãƒˆä½¿ç”¨æ–™ã®1å¹´åˆ†ã¨ã€ç”³å‘Šæ–™ã®åˆè¨ˆé¡ã‚’å‰æ‰•ã„ã§ãŠæ”¯æ‰•ã„ã„ãŸã ãã¾ã™ã€‚",
                category: "å¥‘ç´„"
            },

            // ç”³å‘Šã«ã¤ã„ã¦
            "ç”³å‘Š": {
                answer: "æœŸé™å†…ã«ç”³å‘Šã‚’å®Œäº†ã•ã›ã‚‹ãŸã‚ã€ä»¥ä¸‹ã®æœŸé™ã¾ã§ã«ã”å¥‘ç´„ã‚’ãŠé¡˜ã„ã—ã¦ãŠã‚Šã¾ã™ï¼š\n\nâ€¢ å€‹äººäº‹æ¥­ä¸»ã®æ–¹ï¼ˆç¢ºå®šç”³å‘Šï¼‰ï¼šç¢ºå®šç”³å‘Šã®æœŸæ—¥ï¼ˆåŸå‰‡3æœˆ15æ—¥ï¼‰ã®1ãƒ¶æœˆå‰ã¾ã§\nâ€¢ æ³•äººã®æ–¹ï¼ˆæ±ºç®—ç”³å‘Šï¼‰ï¼šæ³•äººã®æ±ºç®—æœˆã®1ãƒ¶æœˆå‰ã¾ã§\n\nä¾‹ï¼š12æœˆæ±ºç®—ã®æ³•äººã®å ´åˆã€11æœˆæœ«ã¾ã§ã®ã”å¥‘ç´„ãŒå¿…è¦ã§ã™ã€‚",
                category: "ç”³å‘Š"
            },
            "ç¢ºå®šç”³å‘Š": {
                answer: "æœŸé™å†…ã«ç”³å‘Šã‚’å®Œäº†ã•ã›ã‚‹ãŸã‚ã€ç¢ºå®šç”³å‘Šã®æœŸæ—¥ï¼ˆåŸå‰‡3æœˆ15æ—¥ï¼‰ã®1ãƒ¶æœˆå‰ã¾ã§ã«ã”å¥‘ç´„ã‚’ãŠé¡˜ã„ã—ã¦ãŠã‚Šã¾ã™ã€‚ä¸Šè¨˜ã®æœŸé™ã‚’éãã¦ã‹ã‚‰ã®ã”å¥‘ç´„ã®å ´åˆã€æœŸé™å†…ã®ç”³å‘Šã‚’ãŠå—ã‘ã§ããªã„å¯èƒ½æ€§ãŒã”ã–ã„ã¾ã™ã€‚",
                category: "ç”³å‘Š"
            },

            // ãã®ä»–
            "é‹å–¶ä¼šç¤¾": {
                answer: "ã‚½ãƒ«ãƒ“ã‚¹ç¨ç†å£«æ³•äººãŒé‹å–¶ã—ã¦ãŠã‚Šã¾ã™ã€‚",
                category: "ãã®ä»–"
            }
        };

        let chatHistory = [];
        let isTyping = false;

        // ãƒ—ãƒ©ãƒ³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
        document.getElementById('simulatorForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const annualRevenue = formData.get('annualRevenue');
            const businessType = formData.get('businessType');
            const monthlyTransactions = formData.get('monthlyTransactions');
            
            // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®å–å¾—
            const checkboxes = {
                invoice: document.getElementById('invoiceRegistered').checked,
                over1000Before: document.getElementById('over1000Before').checked,
                over1000Recent: document.getElementById('over1000Recent').checked,
                voluntary: document.getElementById('voluntaryTaxable').checked,
                blueReturn: document.getElementById('blueReturn').checked,
                cryptoFx: document.getElementById('cryptoFx').checked,
                reselling: document.getElementById('reselling').checked
            };
            
            const result = calculatePlan(annualRevenue, businessType, monthlyTransactions, checkboxes);
            displayResult(result);
        });

        function calculatePlan(revenue, businessType, transactions, checkboxes) {
            // å£²ä¸ŠãŒ1000ä¸‡å††ä»¥ä¸Šã¾ãŸã¯3000ä¸‡å††ä»¥ä¸Šã®å ´åˆ
            if (revenue === '1000-3000' || revenue === 'over3000') {
                return {
                    type: 'solvis',
                    title: 'ğŸ¢ ã‚½ãƒ«ãƒ“ã‚¹ç¨ç†å£«æ³•äººã‚’ãŠã™ã™ã‚ã—ã¾ã™',
                    content: `å¹´é–“å£²ä¸ŠãŒ1,000ä¸‡å††ã‚’è¶…ãˆã‚‹äº‹æ¥­è€…æ§˜ã«ã¯ã€ã‚ˆã‚Šå°‚é–€çš„ãªã‚µãƒãƒ¼ãƒˆãŒå¯èƒ½ãªã€Œã‚½ãƒ«ãƒ“ã‚¹ç¨ç†å£«æ³•äººã€ã§ã®ã”å¥‘ç´„ã‚’ãŠã™ã™ã‚ã„ãŸã—ã¾ã™ã€‚\n\nâ€¢ ã‚ˆã‚Šé«˜åº¦ãªç¨å‹™ç›¸è«‡\nâ€¢ æ³•äººåŒ–æ”¯æ´\nâ€¢ ç¯€ç¨å¯¾ç­–ã®ææ¡ˆ\nâ€¢ äº‹æ¥­æ‹¡å¤§ã«å‘ã‘ãŸã‚¢ãƒ‰ãƒã‚¤ã‚¹`,
                    actions: [
                        { text: 'ã‚½ãƒ«ãƒ“ã‚¹ç¨ç†å£«æ³•äººã«ç›¸è«‡', url: 'https://www.solvis-tax.com/', primary: true },
                        { text: 'ã¿ã‚“ãªã®ç¨å‹™é¡§å•ã«ã¤ã„ã¦è©³ã—ã', url: '/', primary: false }
                    ]
                };
            }

            // æ¶ˆè²»ç¨ç”³å‘ŠãŒå¿…è¦ã‹ãƒã‚§ãƒƒã‚¯
            const needsConsumptionTax = checkboxes.invoice || checkboxes.over1000Before || 
                                     checkboxes.over1000Recent || checkboxes.voluntary;

            // ãƒ—ãƒ©ãƒ³åˆ¤å®š
            if (needsConsumptionTax) {
                return {
                    type: 'consumption_tax',
                    title: 'ğŸ“Š æ¶ˆè²»ç¨ç”³å‘Šãƒ—ãƒ©ãƒ³ãŒãŠã™ã™ã‚ã§ã™',
                    content: `ã‚ãªãŸã®äº‹æ¥­çŠ¶æ³ã§ã¯æ¶ˆè²»ç¨ã®ç”³å‘ŠãŒå¿…è¦ã§ã™ã€‚æ¶ˆè²»ç¨ç”³å‘Šã«å¯¾å¿œã—ãŸãƒ—ãƒ©ãƒ³ã‚’ã”ææ¡ˆã„ãŸã—ã¾ã™ã€‚\n\nâ€¢ å¹´æ‰•ã„: æœˆé¡10,740å††ï¼ˆå¹´é–“128,880å††ï¼‰\nâ€¢ æœˆæ‰•ã„: æœˆé¡12,300å††ï¼ˆå¹´é–“147,600å††ï¼‰\n\nå¹´æ‰•ã„ãƒ—ãƒ©ãƒ³ãªã‚‰ç´„12%ãŠå¾—ã«ãªã‚Šã¾ã™ï¼`,
                    actions: [
                        { text: 'æ¶ˆè²»ç¨ç”³å‘Šãƒ—ãƒ©ãƒ³ã‚’è¦‹ã‚‹', url: '/cost.tax', primary: true },
                        { text: 'è©³ã—ã„æ–™é‡‘ã‚’ç¢ºèª', url: '/cost', primary: false }
                    ]
                };
            } else {
                return {
                    type: 'standard',
                    title: 'ğŸ’° é€šå¸¸ãƒ—ãƒ©ãƒ³ãŒãŠã™ã™ã‚ã§ã™',
                    content: `ã‚ãªãŸã®äº‹æ¥­çŠ¶æ³ã«æœ€é©ãªé€šå¸¸ãƒ—ãƒ©ãƒ³ã‚’ãŠã™ã™ã‚ã„ãŸã—ã¾ã™ã€‚\n\nâ€¢ å¹´æ‰•ã„: æœˆé¡8,256å††ï¼ˆå¹´é–“99,080å††ï¼‰\nâ€¢ æœˆæ‰•ã„: æœˆé¡9,800å††ï¼ˆå¹´é–“117,600å††ï¼‰\n\nå¹´æ‰•ã„ãƒ—ãƒ©ãƒ³ãªã‚‰ç´„15%ãŠå¾—ã«ãªã‚Šã¾ã™ï¼${checkboxes.blueReturn ? '\n\nâ€»é’è‰²ç”³å‘Šã®ç”³è«‹ã¯ã€ã”è‡ªèº«ã§ç¨å‹™ç½²ã«ãŠæ‰‹ç¶šãã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚ç”³è«‹æ–¹æ³•ã«ã¤ã„ã¦ã¯ã‚µãƒãƒ¼ãƒˆã„ãŸã—ã¾ã™ã€‚' : ''}`,
                    actions: [
                        { text: 'é€šå¸¸ãƒ—ãƒ©ãƒ³ã‚’è¦‹ã‚‹', url: '/cost', primary: true },
                        { text: 'ãŠç”³ã—è¾¼ã¿', url: '/#contact', primary: true }
                    ]
                };
            }
        }

        function displayResult(result) {
            const resultCard = document.getElementById('resultCard');
            const resultTitle = document.getElementById('resultTitle');
            const resultContent = document.getElementById('resultContent');
            const resultActions = document.getElementById('resultActions');

            resultTitle.textContent = result.title;
            resultContent.innerHTML = result.content.replace(/\n/g, '<br>');
            
            resultActions.innerHTML = '';
            result.actions.forEach(action => {
                const button = document.createElement('a');
                button.href = action.url;
                button.className = `result-btn ${action.primary ? '' : 'secondary'}`;
                button.textContent = action.text;
                if (action.url.startsWith('http')) {
                    button.target = '_blank';
                    button.rel = 'noopener noreferrer';
                }
                resultActions.appendChild(button);
            });

            resultCard.style.display = 'block';
            resultCard.scrollIntoView({ behavior: 'smooth' });
        }

        // ãƒãƒ£ãƒƒãƒˆåˆæœŸåŒ–
        function initializeChat() {
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // å…¥åŠ›æ¬„ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
            document.getElementById('chatInput').focus();
        }

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message === '' || isTyping) return;
            
            // ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’éè¡¨ç¤º
            const welcomeMessage = document.getElementById('welcomeMessage');
            if (welcomeMessage) {
                welcomeMessage.style.display = 'none';
            }
            
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
            addMessage('user', message);
            input.value = '';
            autoResize(input);
            
            // ãƒœãƒƒãƒˆã®è¿”ç­”ã‚’ç”Ÿæˆ
            generateBotResponse(message);
            
            // ãƒãƒ£ãƒƒãƒˆå±¥æ­´ã«è¿½åŠ 
            chatHistory.push({
                type: 'user',
                message: message,
                timestamp: new Date()
            });
        }

        // ã‚¯ã‚¤ãƒƒã‚¯è³ªå•é€ä¿¡
        function sendQuickQuestion(question) {
            const input = document.getElementById('chatInput');
            input.value = question;
            sendMessage();
        }

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¿½åŠ 
        function addMessage(type, content, showTime = true) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            const now = new Date();
            const timeString = now.toLocaleTimeString('ja-JP', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            if (type === 'bot') {
                messageDiv.innerHTML = `
                    <div class="bot-avatar">AI</div>
                    <div class="message-content">
                        ${content.replace(/\n/g, '<br>')}
                        ${showTime ? `<div class="message-time">${timeString}</div>` : ''}
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="message-content">
                        ${content.replace(/\n/g, '<br>')}
                        ${showTime ? `<div class="message-time">${timeString}</div>` : ''}
                    </div>
                `;
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // ãƒœãƒƒãƒˆã®è¿”ç­”ç”Ÿæˆ
        function generateBotResponse(userMessage) {
            isTyping = true;
            
            // ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼è¡¨ç¤º
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                const response = findBestResponse(userMessage);
                addMessage('bot', response);
                
                // ãƒãƒ£ãƒƒãƒˆå±¥æ­´ã«è¿½åŠ 
                chatHistory.push({
                    type: 'bot',
                    message: response,
                    timestamp: new Date()
                });
                
                isTyping = false;
            }, 1000 + Math.random() * 1000); // 1-2ç§’ã®ãƒ©ãƒ³ãƒ€ãƒ é…å»¶
        }

        // æœ€é©ãªè¿”ç­”ã‚’æ¤œç´¢
        function findBestResponse(userMessage) {
            const message = userMessage.toLowerCase();
            
            // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒãƒãƒ³ã‚°
            for (const [key, value] of Object.entries(faqDatabase)) {
                if (message.includes(key.toLowerCase())) {
                    return value.answer;
                }
            }
            
            // éƒ¨åˆ†ãƒãƒƒãƒãƒ³ã‚°
            if (message.includes('ã‚µãƒ¼ãƒ“ã‚¹') || message.includes('ä½•')) {
                return faqDatabase["ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹"].answer;
            }
            if (message.includes('æ–™é‡‘') || message.includes('å€¤æ®µ') || message.includes('è²»ç”¨')) {
                return faqDatabase["æ–™é‡‘"].answer;
            }
            if (message.includes('å¥‘ç´„') || message.includes('æœŸé–“')) {
                return faqDatabase["å¥‘ç´„æœŸé–“"].answer;
            }
            if (message.includes('è§£ç´„') || message.includes('ã‚„ã‚')) {
                return faqDatabase["é€”ä¸­è§£ç´„"].answer;
            }
            if (message.includes('ç”³å‘Š') || message.includes('ç¢ºå®šç”³å‘Š')) {
                return faqDatabase["ç¢ºå®šç”³å‘Š"].answer;
            }
            if (message.includes('ä¼šç¤¾') || message.includes('é‹å–¶')) {
                return faqDatabase["é‹å–¶ä¼šç¤¾"].answer;
            }
            
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¿”ç­”
            return `ã”è³ªå•ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚\n\nç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ãŒã€ãŠå•ã„åˆã‚ã›ã®å†…å®¹ã«ã¤ã„ã¦è©³ç´°ãªå›ç­”ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã§ã—ãŸã€‚\n\nä»¥ä¸‹ã®ã‚ˆã†ãªè³ªå•ã«ãŠç­”ãˆã§ãã¾ã™ï¼š\nâ€¢ ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹ã«ã¤ã„ã¦\nâ€¢ æ–™é‡‘ã«ã¤ã„ã¦\nâ€¢ å¥‘ç´„ãƒ»è§£ç´„ã«ã¤ã„ã¦\nâ€¢ ç¢ºå®šç”³å‘Šã«ã¤ã„ã¦\nâ€¢ ãã®ä»–ã®ã‚ˆãã‚ã‚‹ã”è³ªå•\n\nã‚ˆã‚Šå…·ä½“çš„ãªã”è³ªå•ã‚’ã„ãŸã ã‘ã‚Œã°ã€è©³ã—ããŠç­”ãˆã§ãã¾ã™ã€‚\n\nã¾ãŸã€ç›´æ¥ã®ã”ç›¸è«‡ã‚’ã”å¸Œæœ›ã®å ´åˆã¯ã€ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã®ã€Œç”³è¾¼ã¯ã“ã¡ã‚‰ã€ã‹ã‚‰ãŠç”³ã—è¾¼ã¿ãã ã•ã„ã€‚`;
        }

        // ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼è¡¨ç¤º
        function showTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            const messagesContainer = document.getElementById('chatMessages');
            indicator.style.display = 'flex';
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼éè¡¨ç¤º
        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            indicator.style.display = 'none';
        }

        // å…¥åŠ›æ¬„ã®è‡ªå‹•ãƒªã‚µã‚¤ã‚º
        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
        }

        // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
        function handleInputKeydown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeChat();
        });
    </script>

    <script src="script.js"></script>
</body>
</html>