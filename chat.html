<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–™é‡‘ãƒ—ãƒ©ãƒ³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ - ã¿ã‚“ãªã®ç¨å‹™é¡§å•</title>
    <meta name="description" content="ã‚ãªãŸã®äº‹æ¥­çŠ¶æ³ã«æœ€é©ãªæ–™é‡‘ãƒ—ãƒ©ãƒ³ã‚’ã”ææ¡ˆã„ãŸã—ã¾ã™ã€‚ç°¡å˜ãªè³ªå•ã«ãŠç­”ãˆã„ãŸã ãã ã‘ã§ã€æœ€é©ãªãƒ—ãƒ©ãƒ³ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚">
    
    <!-- OGP Tags -->
    <meta property="og:title" content="æ–™é‡‘ãƒ—ãƒ©ãƒ³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ - ã¿ã‚“ãªã®ç¨å‹™é¡§å•">
    <meta property="og:description" content="ã‚ãªãŸã®äº‹æ¥­çŠ¶æ³ã«æœ€é©ãªæ–™é‡‘ãƒ—ãƒ©ãƒ³ã‚’ã”ææ¡ˆã„ãŸã—ã¾ã™ã€‚ç°¡å˜ãªè³ªå•ã«ãŠç­”ãˆã„ãŸã ãã ã‘ã§ã€æœ€é©ãªãƒ—ãƒ©ãƒ³ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://minzei-tax.com/chat">
    <meta property="og:image" content="https://minzei-tax.com/images/thumbnail.png">
    <meta name="twitter:card" content="summary_large_image">

    <link rel="icon" href="images/minzeikun.png" type="image/png">

    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&family=Noto+Serif+JP:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Google Tag -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17411262353"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'AW-17411262353');
    </script>
    
    <style>
    .page-container {
        min-height: 100vh;
        background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
        padding: 80px 0 40px 0;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .simulator-wrapper {
        max-width: 800px;
        width: 100%;
        padding: 0 20px;
    }
    
    .step-container {
        background: white;
        border-radius: 24px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        padding: 60px 50px;
        text-align: center;
        position: relative;
        min-height: 500px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        transition: all 0.5s ease;
    }
    
    .step-header {
        margin-bottom: 40px;
    }
    
    .step-number {
        position: absolute;
        top: 20px;
        right: 30px;
        background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
        color: #9ca3af;
        font-size: 4rem;
        font-weight: 700;
        padding: 10px 20px;
        border-radius: 12px;
        opacity: 0.3;
        z-index: 1;
    }
    
    .step-icon {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, #14b8a6, #0891b2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 30px auto;
        font-size: 2rem;
        animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }
    
    .step-title {
        font-size: 2.2rem;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 20px;
        line-height: 1.3;
    }
    
    .step-description {
        font-size: 1.1rem;
        color: #6b7280;
        margin-bottom: 40px;
        line-height: 1.6;
    }
    
    .options-grid {
        display: grid;
        gap: 15px;
        margin-bottom: 40px;
    }
    
    .option-item {
        background: #f8fafc;
        border: 3px solid #e2e8f0;
        border-radius: 16px;
        padding: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 600;
        font-size: 1.1rem;
        color: #374151;
    }
    
    .option-item:hover {
        border-color: #14b8a6;
        background: #f0fdfa;
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(20, 184, 166, 0.15);
    }
    
    .option-item.selected {
        background: linear-gradient(135deg, #14b8a6, #0891b2);
        border-color: #14b8a6;
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(20, 184, 166, 0.3);
    }
    
    /* 2ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç”¨ */
    .options-grid.two-column {
        grid-template-columns: 1fr 1fr;
    }
    
    /* 3ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç”¨ */
    .options-grid.three-column {
        grid-template-columns: repeat(3, 1fr);
    }
    
    /* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚¹ã‚¿ã‚¤ãƒ« */
    .checkbox-container {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-bottom: 40px;
    }
    
    .checkbox-item {
        background: #f8fafc;
        border: 3px solid #e2e8f0;
        border-radius: 16px;
        padding: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: space-between;
        text-align: left;
    }
    
    .checkbox-item:hover {
        border-color: #14b8a6;
        background: #f0fdfa;
    }
    
    .checkbox-item.selected {
        background: #f0fdfa;
        border-color: #14b8a6;
        color: #0f766e;
    }
    
    .checkbox-text {
        flex: 1;
        font-weight: 600;
        font-size: 1rem;
        color: #374151;
    }
    
    .checkbox-item.selected .checkbox-text {
        color: #0f766e;
    }
    
    .help-icon {
        background: #e0f2fe;
        border: 2px solid #0891b2;
        border-radius: 50%;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 16px;
        transition: all 0.2s ease;
        margin-left: 15px;
    }
    
    .help-icon:hover {
        background: #0891b2;
        color: white;
        transform: scale(1.1);
    }
    
    .help-text {
        background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
        border: 2px solid #0891b2;
        border-radius: 12px;
        padding: 20px;
        margin-top: 15px;
        text-align: left;
        line-height: 1.6;
        color: #374151;
        display: none;
        animation: slideDown 0.3s ease-out;
    }
    
    .help-text.show {
        display: block;
    }
    
    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .navigation-buttons {
        display: flex;
        gap: 20px;
        justify-content: center;
        margin-top: 40px;
    }
    
    .nav-btn {
        background: #6b7280;
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 12px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 120px;
    }
    
    .nav-btn:hover {
        background: #4b5563;
        transform: translateY(-2px);
    }
    
    .nav-btn.primary {
        background: linear-gradient(135deg, #14b8a6, #0891b2);
    }
    
    .nav-btn.primary:hover {
        background: linear-gradient(135deg, #0891b2, #0e7490);
    }
    
    .nav-btn:disabled {
        background: #d1d5db;
        cursor: not-allowed;
        transform: none;
    }
    
    /* çµæœè¡¨ç¤º */
    .result-container {
        text-align: center;
        padding: 40px;
    }
    
    .result-card {
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        padding: 40px;
        margin: 20px auto;
        max-width: 600px;
        animation: fadeIn 0.8s ease-out;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    .result-card.standard {
        background: linear-gradient(135deg, #f0fdfa, #e6fffa);
        border: 3px solid #14b8a6;
    }
    
    .result-card.consumption_tax {
        background: linear-gradient(135deg, #fdf2f8, #fce7f3);
        border: 3px solid #ec4899;
    }
    
    .result-card.solvis {
        background: linear-gradient(135deg, #fff7ed, #ffedd5);
        border: 3px solid #f97316;
    }
    
    .result-header {
        text-align: center;
        margin-bottom: 30px;
    }
    
    .result-icon {
        font-size: 3rem;
        margin-bottom: 20px;
        display: block;
    }
    
    .result-title {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 15px;
        line-height: 1.3;
    }
    
    .result-content {
        font-size: 1.1rem;
        line-height: 1.7;
        margin-bottom: 30px;
        text-align: left;
    }
    
    .result-actions {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
    }
    
    .result-btn {
        display: inline-block;
        padding: 15px 30px;
        border-radius: 12px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.3s ease;
        font-size: 1.1rem;
    }
    
    .result-btn:hover {
        transform: translateY(-2px);
    }
    
    .result-btn.primary {
        background: linear-gradient(135deg, #14b8a6, #0891b2);
        color: white;
    }
    
    .result-btn.secondary {
        background: white;
        color: #14b8a6;
        border: 2px solid #14b8a6;
    }
    
    .result-btn.secondary:hover {
        background: #14b8a6;
        color: white;
    }
    
    /* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */
    .progress-bar {
        position: absolute;
        top: 0;
        left: 0;
        height: 4px;
        background: linear-gradient(135deg, #14b8a6, #0891b2);
        border-radius: 2px;
        transition: width 0.5s ease;
    }
    
    /* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
    @media (max-width: 768px) {
        .page-container {
            padding: 60px 0 20px 0;
        }
        
        .step-container {
            padding: 40px 30px;
            min-height: 400px;
        }
        
        .step-title {
            font-size: 1.8rem;
        }
        
        .step-description {
            font-size: 1rem;
        }
        
        .options-grid.two-column,
        .options-grid.three-column {
            grid-template-columns: 1fr;
        }
        
        .navigation-buttons {
            flex-direction: column;
            align-items: center;
        }
        
        .nav-btn {
            width: 100%;
            max-width: 300px;
        }
        
        .result-actions {
            flex-direction: column;
            align-items: center;
        }
        
        .result-btn {
            width: 100%;
            max-width: 300px;
            text-align: center;
        }
    }
    
    @media (max-width: 480px) {
        .step-container {
            padding: 30px 20px;
        }
        
        .step-number {
            font-size: 3rem;
            top: 15px;
            right: 20px;
        }
        
        .step-icon {
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
        }
        
        .step-title {
            font-size: 1.5rem;
        }
    }
    </style>
</head>
<body>
    <!-- Navigation Header -->
    <header class="header">
        <div class="container">
            <div class="nav-wrapper">
                <div class="logo">
                    <h1><a href="/">ã¿ã‚“ãªã®ç¨å‹™é¡§å•</a></h1>
                </div>
                
                <!-- Desktop Navigation -->
                <nav class="nav-desktop">
                    <a href="/#services" class="nav-link">ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹</a>
                    <a href="/#plans" class="nav-link">æ–™é‡‘</a>
                    <a href="/#cost-comparison" class="nav-link">ã‚³ã‚¹ãƒˆæ¯”è¼ƒ</a>
                </nav>
                
                <!-- Desktop CTA Button -->
                <div class="cta-desktop">
                    <a href="/#contact" class="btn btn-primary">ç”³è¾¼ã¯ã“ã¡ã‚‰</a>
                </div>
                
                <!-- Mobile Menu Button -->
                <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                
                <!-- Mobile Menu -->
                <nav class="mobile-menu" id="mobileMenu">
                    <a href="/#services" class="mobile-nav-link">ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹</a>
                    <a href="/#plans" class="mobile-nav-link">æ–™é‡‘</a>
                    <a href="/#cost-comparison" class="mobile-nav-link">ã‚³ã‚¹ãƒˆæ¯”è¼ƒ</a>
                    <a href="/#contact" class="btn btn-primary mobile-cta">ç”³è¾¼ã¯ã“ã¡ã‚‰</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Page Container -->
    <section class="page-container">
        <div class="simulator-wrapper">
            <div class="step-container" id="stepContainer">
                <div class="progress-bar" id="progressBar" style="width: 0%;"></div>
                <div class="step-number" id="stepNumber">1</div>
                
                <!-- Step Content will be dynamically inserted here -->
                <div id="stepContent"></div>
                
                <!-- Navigation Buttons -->
                <div class="navigation-buttons" id="navigationButtons">
                    <button class="nav-btn" id="prevBtn" onclick="previousStep()" style="display: none;">å‰ã«æˆ»ã‚‹</button>
                    <button class="nav-btn primary" id="nextBtn" onclick="nextStep()" disabled>æ¬¡ã«é€²ã‚€</button>
                </div>
            </div>
        </div>
    </section>

    <script>
        let currentStep = 1;
        const totalSteps = 4;
        let simulatorData = {};

        const steps = {
            1: {
                icon: 'ğŸ’°',
                title: 'å¹´é–“ã®å£²ä¸Šé‡‘é¡ã¯ã„ãã‚‰ã§ã™ã‹ï¼Ÿ',
                description: 'èµ·æ¥­1å¹´ç›®ã®æ–¹ã¯æƒ³å®šã•ã‚Œã‚‹å¹´é–“å£²ä¸Šé«˜ï¼ˆå¹´å•†ï¼‰ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚',
                type: 'single-choice',
                options: [
                    { value: 'under500', label: '500ä¸‡å††æœªæº€' },
                    { value: '500-1000', label: '500ä¸‡å††ï½1,000ä¸‡å††æœªæº€' },
                    { value: '1000-3000', label: '1,000ä¸‡å††è¶…ï½3,000ä¸‡å††' },
                    { value: 'over3000', label: '3,000ä¸‡å††è¶…' }
                ]
            },
            2: {
                icon: 'ğŸ“Š',
                title: 'è¨˜å¸³ä»£è¡Œã¯ä¾é ¼ã—ã¾ã™ã‹ï¼Ÿ',
                description: 'ç¨ç†å£«ã«ä¼šè¨ˆã‚½ãƒ•ãƒˆã¸ã®ä»•è¨³ã‚’ä¾é ¼ã™ã‚‹å ´åˆã¯ã€Œå¿…è¦ã€ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚',
                type: 'single-choice',
                options: [
                    { value: 'required', label: 'å¿…è¦' },
                    { value: 'not-required', label: 'ä¸è¦' }
                ]
            },
            3: {
                icon: 'ğŸ“‹',
                title: 'è©²å½“ã™ã‚‹é …ç›®ã‚’ã™ã¹ã¦é¸æŠã—ã¦ãã ã•ã„',
                description: 'â€» æ¶ˆè²»ç¨ç”³å‘ŠãŒå¿…è¦ã‹ã©ã†ã‹ã‚’åˆ¤å®šã™ã‚‹ãŸã‚ã«å¿…è¦ãªæƒ…å ±ã§ã™',
                type: 'multi-choice',
                options: [
                    { 
                        value: 'invoice', 
                        label: 'ã‚¤ãƒ³ãƒœã‚¤ã‚¹ç™ºè¡Œäº‹æ¥­è€…ã¨ã—ã¦ç™»éŒ²æ¸ˆã¿',
                        help: 'ğŸ“‹ ã‚¤ãƒ³ãƒœã‚¤ã‚¹ç™ºè¡Œäº‹æ¥­è€…ã¨ã¯ï¼Ÿ\n\né©æ ¼è«‹æ±‚æ›¸ï¼ˆã‚¤ãƒ³ãƒœã‚¤ã‚¹ï¼‰ã‚’ç™ºè¡Œã§ãã‚‹äº‹æ¥­è€…ã¨ã—ã¦ç¨å‹™ç½²ã«ç™»éŒ²ã—ã¦ã„ã‚‹äº‹æ¥­è€…ã®ã“ã¨ã§ã™ã€‚2023å¹´10æœˆã‹ã‚‰å§‹ã¾ã£ãŸã‚¤ãƒ³ãƒœã‚¤ã‚¹åˆ¶åº¦ã«å¯¾å¿œã™ã‚‹ãŸã‚ã€å¤šãã®äº‹æ¥­è€…ãŒç™»éŒ²ã—ã¦ã„ã¾ã™ã€‚ç™»éŒ²æ¸ˆã¿ã®å ´åˆã¯è‡ªå‹•çš„ã«æ¶ˆè²»ç¨ã®èª²ç¨äº‹æ¥­è€…ã¨ãªã‚Šã¾ã™ã€‚'
                    },
                    { 
                        value: 'over1000Before', 
                        label: '2å¹´å‰ã®å£²ä¸ŠãŒ1,000ä¸‡å††ã‚’è¶…ãˆã¦ã„ã‚‹',
                        help: 'åŸºæº–æœŸé–“ã¨ã¯ï¼Ÿ\n\n2å¹´å‰ã®1å¹´é–“ã‚’ã€ŒåŸºæº–æœŸé–“ã€ã¨å‘¼ã³ã¾ã™ã€‚ä¾‹ãˆã°ã€2024å¹´åˆ†ã®ç”³å‘Šã§ã‚ã‚Œã°2022å¹´ã®å£²ä¸ŠãŒå¯¾è±¡ã§ã™ã€‚åŸºæº–æœŸé–“ã®èª²ç¨å£²ä¸Šé«˜ãŒ1,000ä¸‡å††ã‚’è¶…ãˆã¦ã„ã‚‹å ´åˆã€æ¶ˆè²»ç¨ã®èª²ç¨äº‹æ¥­è€…ã¨ãªã‚Šã¾ã™ã€‚'
                    },
                    { 
                        value: 'over1000Recent', 
                        label: 'å‰å¹´å‰åŠ6ãƒ¶æœˆã®å£²ä¸ŠãŒ1,000ä¸‡å††ã‚’è¶…ãˆã¦ã„ã‚‹',
                        help: 'ğŸ“… ç‰¹å®šæœŸé–“ã¨ã¯ï¼Ÿ\n\nå‰å¹´ã®1æœˆã‹ã‚‰6æœˆã¾ã§ã®6ãƒ¶æœˆé–“ã‚’ã€Œç‰¹å®šæœŸé–“ã€ã¨å‘¼ã³ã¾ã™ã€‚ã“ã®æœŸé–“ã®èª²ç¨å£²ä¸Šé«˜ã¾ãŸã¯çµ¦ä¸æ”¯æ‰•é¡ã®ã„ãšã‚Œã‹ãŒ1,000ä¸‡å††ã‚’è¶…ãˆã¦ã„ã‚‹å ´åˆã€æ¶ˆè²»ç¨ã®èª²ç¨äº‹æ¥­è€…ã¨ãªã‚Šã¾ã™ã€‚'
                    },
                    { 
                        value: 'voluntary', 
                        label: 'ä»»æ„ã§èª²ç¨äº‹æ¥­è€…ã‚’é¸æŠã—ã¦ã„ã‚‹',
                        help: 'âœ‹ ä»»æ„ã®èª²ç¨äº‹æ¥­è€…é¸æŠã¨ã¯ï¼Ÿ\n\nå£²ä¸ŠãŒ1,000ä¸‡å††ä»¥ä¸‹ã§ã‚‚ã€è‡ªã‚‰é¸æŠã—ã¦æ¶ˆè²»ç¨ã®èª²ç¨äº‹æ¥­è€…ã«ãªã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã€Œæ¶ˆè²»ç¨èª²ç¨äº‹æ¥­è€…é¸æŠå±Šå‡ºæ›¸ã€ã‚’ç¨å‹™ç½²ã«æå‡ºã—ã¦ã„ã‚‹å ´åˆãŒã“ã‚Œã«è©²å½“ã—ã¾ã™ã€‚è¨­å‚™æŠ•è³‡ã§æ¶ˆè²»ç¨ã®é‚„ä»˜ã‚’å—ã‘ãŸã„å ´åˆãªã©ã«é¸æŠã—ã¾ã™ã€‚'
                    },
                    { 
                        value: 'exportRefund', 
                        label: 'è¼¸å‡ºã‚„æ¶ˆè²»ç¨é‚„ä»˜ã‚’å—ã‘ãŸã„',
                        help: 'ğŸŒ è¼¸å‡ºãƒ»æ¶ˆè²»ç¨é‚„ä»˜ã¨ã¯ï¼Ÿ\n\nå•†å“ã‚„ã‚µãƒ¼ãƒ“ã‚¹ã‚’æµ·å¤–ã«è¼¸å‡ºã™ã‚‹å ´åˆã€å›½å†…ã®æ¶ˆè²»ç¨ã¯å…ç¨ã¨ãªã‚Šã¾ã™ã€‚ã¾ãŸã€ä»•å…¥ã‚Œãªã©ã§æ”¯æ‰•ã£ãŸæ¶ˆè²»ç¨ã¨ã®å·®é¡ã§é‚„ä»˜ã‚’å—ã‘ã‚‰ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚è¼¸å‡ºæ¥­å‹™ã‚„è¨­å‚™æŠ•è³‡ã«ã‚ˆã‚Šæ¶ˆè²»ç¨ã®é‚„ä»˜ã‚’æœŸå¾…ã•ã‚Œã‚‹å ´åˆã¯æ¶ˆè²»ç¨ç”³å‘ŠãŒå¿…è¦ã§ã™ã€‚'
                    },
                    { 
                        value: 'blueReturn', 
                        label: 'é’è‰²ç”³å‘Šã®ç”³è«‹ã‚’ã—ãŸã„',
                        help: 'ğŸ’™ é’è‰²ç”³å‘Šã¨ã¯ï¼Ÿ\n\nå¸³ç°¿ã‚’ãã¡ã‚“ã¨ã¤ã‘ã‚‹ã“ã¨ã‚’æ¡ä»¶ã«ã€ç¨åˆ¶ä¸Šã®ç‰¹å…¸ã‚’å—ã‘ã‚‰ã‚Œã‚‹ç”³å‘Šæ–¹æ³•ã§ã™ã€‚65ä¸‡å††ã®ç‰¹åˆ¥æ§é™¤ã‚„å®¶æ—ã¸ã®çµ¦ä¸ã®çµŒè²»ç®—å…¥ãªã©ã®ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚\n\nğŸ“… é’è‰²ç”³å‘Šæ‰¿èªç”³è«‹æ›¸ã®æå‡ºæœŸé™\nãƒ»æ–°è¦é–‹æ¥­ã®å ´åˆï¼šé–‹æ¥­ã‹ã‚‰2ãƒ¶æœˆä»¥å†…\nãƒ»æ—¢å­˜äº‹æ¥­è€…ã®å ´åˆï¼šé’è‰²ç”³å‘Šã‚’å—ã‘ã‚ˆã†ã¨ã™ã‚‹å¹´ã®3æœˆ15æ—¥ã¾ã§\n\nğŸ’° ä»£è¡Œè²»ç”¨ã«ã¤ã„ã¦\né’è‰²ç”³å‘Šæ‰¿èªç”³è«‹æ›¸ã‚’ã”è‡ªèº«ã§æå‡ºã•ã‚Œãªã„å ´åˆã€ä»£è¡Œè²»ç”¨ã¨ã—ã¦åˆ¥é€”5,000å††ï¼ˆç¨è¾¼ï¼‰ã‚’ç”³ã—å—ã‘ã¾ã™ã€‚ç”³è«‹ã«é–¢ã—ã¦ã¯å¥‘ç´„å¾Œã®Chatworkå†…ã§ã®ã”ç›¸è«‡ã¨ãªã‚Šã¾ã™ã€‚'
                    },
                    { 
                        value: 'businessRegistration', 
                        label: 'é–‹æ¥­å±Šã®ç”³è«‹ã‚’ã—ãŸã„',
                        help: 'ğŸ“„ é–‹æ¥­å±Šã¨ã¯ï¼Ÿ\n\nå€‹äººäº‹æ¥­ã‚’é–‹å§‹ã—ãŸã“ã¨ã‚’ç¨å‹™ç½²ã«å±Šã‘å‡ºã‚‹ãŸã‚ã®æ›¸é¡ã§ã™ã€‚äº‹æ¥­é–‹å§‹ã‹ã‚‰1ãƒ¶æœˆä»¥å†…ã«æå‡ºã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚å±‹å·ã®ä½¿ç”¨ã‚„é’è‰²ç”³å‘Šã®å‰æã¨ãªã‚‹é‡è¦ãªæ‰‹ç¶šãã§ã™ã€‚\n\nğŸ“… é–‹æ¥­å±Šã®æå‡ºæœŸé™\näº‹æ¥­é–‹å§‹ã‹ã‚‰1ãƒ¶æœˆä»¥å†…ã«æ‰€è½„ã®ç¨å‹™ç½²ã«æå‡ºã—ã¦ãã ã•ã„ã€‚\n\nğŸ’° ä»£è¡Œè²»ç”¨ã«ã¤ã„ã¦\né–‹æ¥­å±Šã‚’ã”è‡ªèº«ã§æå‡ºã•ã‚Œãªã„å ´åˆã€ä»£è¡Œè²»ç”¨ã¨ã—ã¦åˆ¥é€”5,000å††ï¼ˆç¨è¾¼ï¼‰ã‚’ç”³ã—å—ã‘ã¾ã™ã€‚ç”³è«‹ã«é–¢ã—ã¦ã¯å¥‘ç´„å¾Œã®Chatworkå†…ã§ã®ã”ç›¸è«‡ã¨ãªã‚Šã¾ã™ã€‚'
                    },
                    { 
                        value: 'cryptoFx', 
                        label: 'æš—å·è³‡ç”£ãƒ»ä»®æƒ³é€šè²¨ã®FXã§ã®åˆ©ç›ŠãŒã‚ã‚‹',
                        help: 'â‚¿ æš—å·è³‡ç”£ãƒ»ä»®æƒ³é€šè²¨ã®ç¨å‹™ã¨ã¯ï¼Ÿ\n\nãƒ“ãƒƒãƒˆã‚³ã‚¤ãƒ³ãªã©ã®æš—å·è³‡ç”£ã®å£²è²·ã‚„FXå–å¼•ã§å¾—ãŸåˆ©ç›Šã¯ã€åŸå‰‡ã¨ã—ã¦é›‘æ‰€å¾—ã¨ãªã‚Šç¢ºå®šç”³å‘ŠãŒå¿…è¦ã§ã™ã€‚å–å¼•ã®è¨˜éŒ²ã‚’ã—ã£ã‹ã‚Šæ®‹ã—ã¦ãŠãã“ã¨ãŒé‡è¦ã§ã™ã€‚å¹´é–“å£²ä¸ŠãŒ1,000ä¸‡å††æœªæº€ã§ã‚ã‚Œã°å½“ã‚µãƒ¼ãƒ“ã‚¹ã§å¯¾å¿œå¯èƒ½ã§ã™ã€‚\n\nğŸ’° è¿½åŠ æ–™é‡‘ã«ã¤ã„ã¦\næš—å·è³‡ç”£ã®é›‘æ‰€å¾—ç”³å‘Šã«ã¯ã€åˆ¥é€”30,000å††ï¼ˆç¨è¾¼ï¼‰ã®è¿½åŠ æ–™é‡‘ãŒç™ºç”Ÿã„ãŸã—ã¾ã™ã€‚ç”³è«‹ã«é–¢ã—ã¦ã¯å¥‘ç´„å¾Œã®Chatworkå†…ã§ã®ã”ç›¸è«‡ã¨ãªã‚Šã¾ã™ã€‚'
                    },
                    { 
                        value: 'reselling', 
                        label: 'ã›ã©ã‚Šãƒ»è¼¸å…¥ãƒ»è»¢å£²ã§ã®åˆ©ç›ŠãŒã‚ã‚‹',
                        help: 'ğŸ“¦ ã›ã©ã‚Šãƒ»è»¢å£²ãƒ“ã‚¸ãƒã‚¹ã¨ã¯ï¼Ÿ\n\nå•†å“ã‚’ä»•å…¥ã‚Œã¦è²©å£²ã™ã‚‹äº‹æ¥­ã®ã“ã¨ã§ã™ã€‚Amazonã€ãƒ¡ãƒ«ã‚«ãƒªã€eBayãªã©ã§ã®è²©å£²ã‚‚å«ã¾ã‚Œã¾ã™ã€‚ç¶™ç¶šçš„ã«è¡Œã£ã¦ã„ã‚‹å ´åˆã¯äº‹æ¥­æ‰€å¾—ã¨ãªã‚Šã€ç¢ºå®šç”³å‘ŠãŒå¿…è¦ã§ã™ã€‚å¹´é–“å£²ä¸ŠãŒ1,000ä¸‡å††æœªæº€ã§ã‚ã‚Œã°å½“ã‚µãƒ¼ãƒ“ã‚¹ã§å¯¾å¿œå¯èƒ½ã§ã™ã€‚'
                    }
                ]
            },
            4: {
                icon: 'ğŸ“',
                title: 'æœˆé–“å–å¼•ä»¶æ•°ï¼ˆäºˆæƒ³ï¼‰',
                description: '',
                type: 'single-choice',
                options: [
                    { value: 'under50', label: '50ä»¶æœªæº€' },
                    { value: '50-100', label: '50ã€œ100ä»¶' },
                    { value: '100-200', label: '100ã€œ200ä»¶' },
                    { value: 'over200', label: '200ä»¶ä»¥ä¸Š' }
                ]
            }
        };

        function initializeSimulator() {
            renderStep(currentStep);
        }

        function renderStep(stepNumber) {
            const step = steps[stepNumber];
            const stepContent = document.getElementById('stepContent');
            const stepNumberEl = document.getElementById('stepNumber');
            const progressBar = document.getElementById('progressBar');
            
            // Update step number and progress
            stepNumberEl.textContent = `${stepNumber}/${totalSteps}`;
            progressBar.style.width = `${(stepNumber / totalSteps) * 100}%`;
            
            let content = '';
            
            if (stepNumber <= totalSteps) {
                content = `
                    <div class="step-header">
                        <div class="step-icon">${step.icon}</div>
                        <h2 class="step-title">${step.title}</h2>
                        ${step.description ? `<p class="step-description">${step.description}</p>` : ''}
                    </div>
                `;
                
                if (step.type === 'single-choice') {
                    const columns = step.options.length <= 2 ? 'two-column' : 
                                   step.options.length <= 3 ? 'three-column' : '';
                    content += `<div class="options-grid ${columns}">`;
                    step.options.forEach(option => {
                        const isSelected = simulatorData[`step${stepNumber}`] === option.value;
                        content += `
                            <div class="option-item ${isSelected ? 'selected' : ''}" 
                                 onclick="selectOption(${stepNumber}, '${option.value}')">
                                ${option.label}
                            </div>
                        `;
                    });
                    content += '</div>';
                } else if (step.type === 'multi-choice') {
                    content += '<div class="checkbox-container">';
                    step.options.forEach((option, index) => {
                        const isSelected = simulatorData[`step${stepNumber}`] && 
                                         simulatorData[`step${stepNumber}`].includes(option.value);
                        content += `
                            <div class="checkbox-item ${isSelected ? 'selected' : ''}" 
                                 onclick="toggleOption(${stepNumber}, '${option.value}')">
                                <span class="checkbox-text">${option.label}</span>
                                ${option.help ? `<div class="help-icon" onclick="event.stopPropagation(); toggleHelp('help-${stepNumber}-${index}')">â“</div>` : ''}
                            </div>
                            ${option.help ? `<div class="help-text" id="help-${stepNumber}-${index}">${option.help.replace(/\n/g, '<br>')}</div>` : ''}
                        `;
                    });
                    content += '</div>';
                }
            } else {
                // Show results
                const result = calculatePlan();
                content = `
                    <div class="result-container">
                        <div class="result-card ${result.type}">
                            <div class="result-header">
                                <span class="result-icon">${result.icon}</span>
                                <h2 class="result-title">${result.title}</h2>
                            </div>
                            <div class="result-content">${result.content}</div>
                            <div class="result-actions">
                                ${result.actions.map(action => 
                                    `<a href="${action.url}" class="result-btn ${action.primary ? 'primary' : 'secondary'}" 
                                       ${action.url.startsWith('http') ? 'target="_blank" rel="noopener noreferrer"' : ''}>
                                        ${action.text}
                                    </a>`
                                ).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }
            
            stepContent.innerHTML = content;
            updateNavigationButtons();
        }

        function selectOption(stepNumber, value) {
            simulatorData[`step${stepNumber}`] = value;
            renderStep(stepNumber);
        }

        function toggleOption(stepNumber, value) {
            if (!simulatorData[`step${stepNumber}`]) {
                simulatorData[`step${stepNumber}`] = [];
            }
            
            const index = simulatorData[`step${stepNumber}`].indexOf(value);
            if (index > -1) {
                simulatorData[`step${stepNumber}`].splice(index, 1);
            } else {
                simulatorData[`step${stepNumber}`].push(value);
            }
            
            renderStep(stepNumber);
        }

        function toggleHelp(helpId) {
            const helpElement = document.getElementById(helpId);
            if (helpElement) {
                helpElement.classList.toggle('show');
            }
        }

        function nextStep() {
            if (currentStep <= totalSteps) {
                currentStep++;
                renderStep(currentStep);
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                renderStep(currentStep);
            }
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            // Show/hide previous button
            if (currentStep > 1 && currentStep <= totalSteps) {
                prevBtn.style.display = 'block';
            } else {
                prevBtn.style.display = 'none';
            }
            
            // Update next button
            if (currentStep > totalSteps) {
                nextBtn.style.display = 'none';
            } else {
                nextBtn.style.display = 'block';
                
                // Check if current step has valid selection
                const isStepComplete = isCurrentStepComplete();
                nextBtn.disabled = !isStepComplete;
                
                if (currentStep === totalSteps) {
                    nextBtn.textContent = 'æœ€é©ãªãƒ—ãƒ©ãƒ³ã‚’è¨ºæ–­ã™ã‚‹';
                } else {
                    nextBtn.textContent = 'æ¬¡ã«é€²ã‚€';
                }
            }
        }

        function isCurrentStepComplete() {
            const stepData = simulatorData[`step${currentStep}`];
            const step = steps[currentStep];
            
            if (step.type === 'single-choice') {
                return stepData !== undefined;
            } else if (step.type === 'multi-choice') {
                return true; // Multi-choice can be empty
            }
            
            return false;
        }

        function calculatePlan() {
            const revenue = simulatorData.step1;
            const bookkeeping = simulatorData.step2;
            const conditions = simulatorData.step3 || [];
            const transactions = simulatorData.step4;
            
            // ã€æœ€å„ªå…ˆã€‘å¹´é–“å£²ä¸ŠãŒ1000ä¸‡å††ã‚’è¶…ãˆã‚‹å ´åˆã¯ã‚½ãƒ«ãƒ“ã‚¹ç¨ç†å£«æ³•äººã‚’æ¡ˆå†…
            if (revenue === '1000-3000' || revenue === 'over3000') {
                return {
                    type: 'solvis',
                    icon: 'ğŸ¢',
                    title: 'ã‚½ãƒ«ãƒ“ã‚¹ç¨ç†å£«æ³•äººã‚’ã”ç´¹ä»‹ã„ãŸã—ã¾ã™',
                    content: `å¹´é–“å£²ä¸ŠãŒ1,000ä¸‡å††ã‚’è¶…ãˆã‚‹äº‹æ¥­è€…æ§˜ã¯ã€ã€Œã¿ã‚“ãªã®ç¨å‹™é¡§å•ã€ã®å¯¾è±¡å¤–ã¨ãªã‚Šã¾ã™ã€‚<br><br>ã‚ˆã‚Šå¤§è¦æ¨¡ãªäº‹æ¥­ã«å¯¾å¿œå¯èƒ½ãªã€Œã‚½ãƒ«ãƒ“ã‚¹ç¨ç†å£«æ³•äººã€ã§ã®ã”å¥‘ç´„ã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚<br><br>ãƒ»å£²ä¸Š1,000ä¸‡å††è¶…ã®äº‹æ¥­ã«ç‰¹åŒ–<br>ãƒ»ã‚ˆã‚Šé«˜åº¦ãªç¨å‹™ç›¸è«‡<br>ãƒ»æ³•äººåŒ–æ”¯æ´<br>ãƒ»ç¯€ç¨å¯¾ç­–ã®ææ¡ˆ<br>ãƒ»äº‹æ¥­æ‹¡å¤§ã«å‘ã‘ãŸã‚¢ãƒ‰ãƒã‚¤ã‚¹<br>ãƒ»æ¶ˆè²»ç¨ç”³å‘Šã‚‚å«ã‚€ç·åˆã‚µãƒãƒ¼ãƒˆ`,
                    actions: [
                        { text: 'ã‚½ãƒ«ãƒ“ã‚¹ç¨ç†å£«æ³•äººã«ç›¸è«‡', url: 'https://www.solvis-tax.com/', primary: true }
                    ]
                };
            }

            // 1000ä¸‡å††æœªæº€ã®å ´åˆã€æ¶ˆè²»ç¨ç”³å‘ŠãŒå¿…è¦ã‹ãƒã‚§ãƒƒã‚¯
            const needsConsumptionTax = conditions.includes('invoice') || 
                                      conditions.includes('over1000Before') || 
                                      conditions.includes('over1000Recent') || 
                                      conditions.includes('voluntary') || 
                                      conditions.includes('exportRefund');

            // ãƒ—ãƒ©ãƒ³åˆ¤å®šï¼ˆ1000ä¸‡å††æœªæº€ã®ã¿ï¼‰
            if (needsConsumptionTax) {
                return {
                    type: 'consumption_tax',
                    icon: 'ğŸ’¸',
                    title: 'æ¶ˆè²»ç¨ç”³å‘Šãƒ—ãƒ©ãƒ³ãŒãŠã™ã™ã‚ã§ã™',
                    content: `ãŠå®¢æ§˜ã®äº‹æ¥­çŠ¶æ³ã§ã¯æ¶ˆè²»ç¨ã®ç”³å‘ŠãŒå¿…è¦ã§ã™ã€‚æ¶ˆè²»ç¨ç”³å‘Šã«å¯¾å¿œã—ãŸãƒ—ãƒ©ãƒ³ã‚’ã”ææ¡ˆã„ãŸã—ã¾ã™ã€‚<br><br>â€¢ å¹´æ‰•ã„: æœˆé¡10,740å††ï¼ˆå¹´é–“128,880å††ï¼‰<br>â€¢ æœˆæ‰•ã„: æœˆé¡12,300å††ï¼ˆå¹´é–“147,600å††ï¼‰<br><br>å¹´æ‰•ã„ãƒ—ãƒ©ãƒ³ãªã‚‰ç´„12%ãŠå¾—ã«ãªã‚Šã¾ã™ï¼`,
                    actions: [
                        { text: 'æ¶ˆè²»ç¨ç”³å‘Šãƒ—ãƒ©ãƒ³ã‚’è¦‹ã‚‹', url: '/cost.tax', primary: true },
                        { text: 'è©³ã—ã„æ–™é‡‘ã‚’ç¢ºèª', url: '/cost', primary: false }
                    ]
                };
            } else {
                // é€šå¸¸ãƒ—ãƒ©ãƒ³ã®å ´åˆã®è¿½åŠ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                let additionalContent = '';
                if (conditions.includes('blueReturn') || conditions.includes('businessRegistration')) {
                    additionalContent = '<br><br>â€»ç”³è«‹ä»£è¡Œã«ã¤ã„ã¦<br>ãƒ»é’è‰²ç”³å‘Šæ‰¿èªç”³è«‹æ›¸ã€é–‹æ¥­å±Šã®ä»£è¡Œã‚’ã”å¸Œæœ›ã®å ´åˆã¯åˆ¥é€”5,000å††ï¼ˆç¨è¾¼ï¼‰ã‚’ç”³ã—å—ã‘ã¾ã™<br>ãƒ»ç”³è«‹ã«é–¢ã—ã¦ã¯å¥‘ç´„å¾Œã®Chatworkå†…ã§ã®ã”ç›¸è«‡ã¨ãªã‚Šã¾ã™';
                }

                return {
                    type: 'standard',
                    icon: 'ğŸ’°',
                    title: 'é€šå¸¸ãƒ—ãƒ©ãƒ³ãŒãŠã™ã™ã‚ã§ã™',
                    content: `ãŠå®¢æ§˜ã®äº‹æ¥­çŠ¶æ³ã«æœ€é©ãªé€šå¸¸ãƒ—ãƒ©ãƒ³ã‚’ãŠã™ã™ã‚ã„ãŸã—ã¾ã™ã€‚<br><br>â€¢ å¹´æ‰•ã„: æœˆé¡8,256å††ï¼ˆå¹´é–“99,080å††ï¼‰<br>â€¢ æœˆæ‰•ã„: æœˆé¡9,800å††ï¼ˆå¹´é–“117,600å††ï¼‰<br><br>å¹´æ‰•ã„ãƒ—ãƒ©ãƒ³ãªã‚‰ç´„15%ãŠå¾—ã«ãªã‚Šã¾ã™ï¼${additionalContent}`,
                    actions: [
                        { text: 'é€šå¸¸ãƒ—ãƒ©ãƒ³ã‚’è¦‹ã‚‹', url: '/cost', primary: true },
                        { text: 'ãŠç”³ã—è¾¼ã¿', url: '/#contact', primary: false }
                    ]
                };
            }
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeSimulator();
        });
    </script>

    <script src="script.js"></script>
</body>
</html>
