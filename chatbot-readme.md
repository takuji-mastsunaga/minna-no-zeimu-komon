# 💬 みんなの税務顧問 チャットボット システム

## 📋 概要

「みんなの税務顧問」のWebサイトに統合されたFAQベースのチャットボットシステムです。
よくある質問への自動回答により、ユーザーの疑問を即座に解決します。

## 🌐 アクセス方法

**URL**: [https://www.minzei-tax.com/chat](https://www.minzei-tax.com/chat)

## ✨ 機能

### 🤖 自動FAQ回答
- **サービス内容**に関する質問
- **料金・契約**に関する質問  
- **確定申告**に関する質問
- **その他**一般的な質問

### 💬 チャット機能
- リアルタイムメッセージング
- タイピングインジケーター
- メッセージ履歴保存
- レスポンシブデザイン（モバイル対応）

### 🎯 クイックスタート
- サービス内容ボタン
- 料金についてボタン
- 契約についてボタン
- 確定申告ボタン

### 💡 候補質問チップ
- よくある質問を選択形式で提供
- ワンクリックで質問送信

## 🛠️ 技術仕様

### フロントエンド
- **HTML5** + **CSS3** + **JavaScript**
- **レスポンシブデザイン**（モバイルファースト）
- **アニメーション**（CSS Keyframes）
- **モダンUI/UX**

### データ管理
- **JavaScript オブジェクト**でFAQ管理
- **キーワードマッチング**システム
- **カテゴリ分類**（サービス、料金、契約、申告、その他）

## 📊 FAQデータベース構造

```javascript
const faqDatabase = {
    "キーワード": {
        answer: "回答内容",
        category: "カテゴリ"
    }
}
```

### 現在のカテゴリ
1. **サービス** - サービス内容、他社との違い、AI対応、Chatwork、資料共有など
2. **料金** - 料金体系、支払い方法など  
3. **契約** - 契約期間、途中解約など
4. **申告** - 確定申告、申告期限など
5. **その他** - 運営会社など

### 新規追加されたFAQ
- **Chatwork対応**: ご契約後のコミュニケーション方法
- **Googleドライブ**: 資料共有の仕組み
- **資料共有**: 領収書等のアップロード方法

## 🔧 FAQの追加・編集方法

### 1. 新しいFAQを追加

`chat.html`の`faqDatabase`オブジェクトに新しいエントリを追加：

```javascript
"新しいキーワード": {
    answer: "回答内容をここに記述",
    category: "カテゴリ名"
},
```

### 2. 既存FAQの編集

既存のキーワードに対応する`answer`や`category`を変更：

```javascript
"既存キーワード": {
    answer: "更新された回答内容",
    category: "更新されたカテゴリ"
},
```

### 3. キーワードマッチング

`findBestResponse`関数で部分マッチングのロジックを調整可能：

```javascript
if (message.includes('新しいキーワード')) {
    return faqDatabase["対応するFAQ"].answer;
}
```

## 📱 レスポンシブ対応

### デスクトップ（768px以上）
- 最大幅800px、中央配置
- 2列のクイックスタートボタン
- 完全なチャット機能

### タブレット（768px以下）
- 画面幅に合わせた調整
- 1列のクイックスタートボタン
- メッセージ幅85%

### モバイル（480px以下）
- 最適化されたレイアウト
- 小さなパディング
- メッセージ幅90%

## 🎨 カスタマイズ

### カラーテーマ変更

メインカラー（現在：ティール系）:
```css
background: linear-gradient(135deg, #14b8a6, #0891b2);
```

### アニメーション調整

メッセージアニメーション:
```css
@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
```

タイピングインジケーター:
```css
@keyframes typingDot {
    0%, 20% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.2); opacity: 0.7; }
    80%, 100% { transform: scale(1); opacity: 1; }
}
```

## 🔗 統合方法

### 他ページからのリンク

```html
<a href="/chat" target="_blank">チャットで質問する</a>
```

### ポップアップ表示

```javascript
window.open('/chat', 'chatbot', 'width=800,height=600');
```

### iFrame埋め込み

```html
<iframe src="/chat" width="100%" height="600px" frameborder="0"></iframe>
```

## 📈 分析・改善

### ユーザー行動追跡

現在実装済み：
- メッセージ履歴（`chatHistory`配列）
- タイムスタンプ記録
- ユーザー/ボット区別

### 改善案

1. **よく検索されるキーワードの追跡**
2. **回答精度の向上**
3. **新しいFAQの自動提案**
4. **多言語対応**
5. **音声入力対応**

## 🚀 デプロイ

### Vercel自動デプロイ
1. GitHubにコミット・プッシュ
2. Vercelが自動的にデプロイ
3. 数分後に本番環境に反映

### 手動確認
```bash
git add .
git commit -m "feat: チャットボット機能追加"
git push origin main
```

## 🐛 トラブルシューティング

### よくある問題

1. **メッセージが送信されない**
   - JavaScriptエラーをブラウザコンソールで確認
   - `sendMessage()`関数の動作確認

2. **FAQが正しく表示されない**
   - `faqDatabase`のデータ構造確認
   - キーワードマッチングロジック確認

3. **モバイルでレイアウトが崩れる**
   - CSSメディアクエリの確認
   - viewport設定の確認

### デバッグ方法

```javascript
// コンソールでチャット履歴確認
console.log(chatHistory);

// FAQ検索テスト
console.log(findBestResponse("テスト質問"));
```

## 📚 ナレッジ管理システム

### 📁 保管場所
1. **chatbot-readme.md** - チャットボットの技術仕様とFAQ管理
2. **chat.html内のfaqDatabase** - 実際のFAQデータ
3. **Gitリポジトリ** - 全体のバージョン管理

### 🔄 更新プロセス
1. **FAQ追加**: `chat.html`の`faqDatabase`に新しいエントリを追加
2. **ドキュメント更新**: `chatbot-readme.md`に変更内容を記録
3. **Git管理**: 変更をコミット・プッシュしてデプロイ

### 🗂️ ナレッジカテゴリ
- **技術仕様**: チャットボットの動作方法
- **FAQ管理**: 質問と回答のデータベース
- **UI/UX**: デザインとユーザー体験の改善履歴
- **トラブルシューティング**: よくある問題と解決方法

### 📝 ナレッジ追加のワークフロー
1. **要求分析**: ユーザーからの新しい質問パターンを特定
2. **FAQ作成**: 適切な回答文を作成
3. **キーワード設定**: 検索しやすいキーワードを設定
4. **テスト**: チャットボットでの動作確認
5. **デプロイ**: 本番環境への反映
6. **ドキュメント更新**: README更新

### 🚀 今後の拡張計画

#### **短期計画（現在進行中）**
- **FAQの充実**: 新しい質問パターンの追加
- **キーワード拡張**: より多くの検索語に対応
- **カテゴリ拡張**: 業種別FAQ、季節性FAQ

#### **中期計画**
- **多言語対応**: 英語FAQの追加
- **分析機能**: よく質問される内容の統計
- **UI/UX改善**: より直感的なインターフェース

#### **長期計画（将来検討）**
- **AI強化**: より精度の高い自動応答（セキュリティ要件: `api-security-guide.md`参照）

### 📈 現在の運用方針
**静的FAQシステムで継続運用**
- 確実性重視: 事前に準備された回答で正確性を保証
- メンテナンス性: FAQ追加・編集が容易
- セキュリティ: APIキー管理等の複雑性を回避
- コスト効率: 外部API使用料なし

## 📞 サポート

### 技術サポート
- **運営**: ソルビス税理士法人
- **技術担当**: システム管理者
- **ナレッジ管理**: chatbot-readme.md

### 更新履歴
- **2024年**: 初回リリース
- **機能**: FAQベースチャットボット
- **対応**: レスポンシブデザイン
- **追加**: Chatwork・Googleドライブ対応FAQ
- **運用方針**: 静的FAQシステムで継続（AI導入は将来検討）

---

**⚠️ 注意事項**
- 本チャットボットは自動応答システムです
- 複雑な質問には人間のサポートが必要な場合があります
- 正式なご契約は公式申込フォームからお手続きください
- ナレッジの更新は `chatbot-readme.md` で管理されています
